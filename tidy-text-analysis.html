<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 7 Tidy text analysis | R for PR evaluation</title>
  <meta name="description" content="Theories, models, methods and objects of controlling - M.A. Seminar at the IfKW, SS 2022" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content=" 7 Tidy text analysis | R for PR evaluation" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Theories, models, methods and objects of controlling - M.A. Seminar at the IfKW, SS 2022" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 7 Tidy text analysis | R for PR evaluation" />
  
  <meta name="twitter:description" content="Theories, models, methods and objects of controlling - M.A. Seminar at the IfKW, SS 2022" />
  

<meta name="author" content="Lara Kobilke, IfKW, Ludwig-Maximilians-Universität München" />


<meta name="date" content="2022-07-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exercise-5-test-your-knowledge.html"/>
<link rel="next" href="solutions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Evaluation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>General information on the course</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-can-i-learn-from-this-tutorial"><i class="fa fa-check"></i>What can I learn from this tutorial?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-can-i-do-if-i-have-a-question"><i class="fa fa-check"></i>What can I do if I have a question?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-can-i-do-if-i-have-problems-with-my-r-code"><i class="fa fa-check"></i>What can I do if I have problems with my R code?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html"><i class="fa fa-check"></i><b>1</b> Tutorial: Installing &amp; Understanding R/R Studio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="1.3" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#updating-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Updating R and R Studio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#on-windows"><i class="fa fa-check"></i><b>1.3.1</b> On Windows</a></li>
<li class="chapter" data-level="1.3.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#on-mac"><i class="fa fa-check"></i><b>1.3.2</b> On MAC</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#how-does-r-work"><i class="fa fa-check"></i><b>1.4</b> How does R work?</a></li>
<li class="chapter" data-level="1.5" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#why-should-i-use-r"><i class="fa fa-check"></i><b>1.5</b> Why should I use R?</a></li>
<li class="chapter" data-level="1.6" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#how-does-r-studio-work"><i class="fa fa-check"></i><b>1.6</b> How does R Studio work?</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#source-writing-your-own-code"><i class="fa fa-check"></i><b>1.6.1</b> Source: Writing your own code</a></li>
<li class="chapter" data-level="1.6.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#console-printing-results"><i class="fa fa-check"></i><b>1.6.2</b> Console: Printing results</a></li>
<li class="chapter" data-level="1.6.3" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#environment-overview-of-objects"><i class="fa fa-check"></i><b>1.6.3</b> Environment: Overview of objects</a></li>
<li class="chapter" data-level="1.6.4" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#plotshelppackages-do-everything-else"><i class="fa fa-check"></i><b>1.6.4</b> Plots/Help/Packages: Do everything else</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#packages"><i class="fa fa-check"></i><b>1.7</b> Packages</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#installing-packages"><i class="fa fa-check"></i><b>1.7.1</b> Installing packages</a></li>
<li class="chapter" data-level="1.7.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#activating-packages"><i class="fa fa-check"></i><b>1.7.2</b> Activating packages</a></li>
<li class="chapter" data-level="1.7.3" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#getting-information-about-packages"><i class="fa fa-check"></i><b>1.7.3</b> Getting information about packages</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#take-aways"><i class="fa fa-check"></i><b>1.8</b> Take-Aways</a></li>
<li class="chapter" data-level="1.9" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#additional-tutorials"><i class="fa fa-check"></i><b>1.9</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tutorial-using-r-as-a-calculator.html"><a href="tutorial-using-r-as-a-calculator.html"><i class="fa fa-check"></i><b>2</b> Tutorial: Using R as a calculator</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tutorial-using-r-as-a-calculator.html"><a href="tutorial-using-r-as-a-calculator.html#using-variables-for-calculation"><i class="fa fa-check"></i><b>2.1</b> Using variables for calculation</a></li>
<li class="chapter" data-level="2.2" data-path="tutorial-using-r-as-a-calculator.html"><a href="tutorial-using-r-as-a-calculator.html#using-vectors-for-calculation"><i class="fa fa-check"></i><b>2.2</b> Using vectors for calculation</a></li>
<li class="chapter" data-level="2.3" data-path="tutorial-using-r-as-a-calculator.html"><a href="tutorial-using-r-as-a-calculator.html#selecting-values-from-a-vector"><i class="fa fa-check"></i><b>2.3</b> Selecting values from a vector</a></li>
<li class="chapter" data-level="2.4" data-path="tutorial-using-r-as-a-calculator.html"><a href="tutorial-using-r-as-a-calculator.html#take-aways-1"><i class="fa fa-check"></i><b>2.4</b> Take-Aways</a></li>
<li class="chapter" data-level="2.5" data-path="tutorial-using-r-as-a-calculator.html"><a href="tutorial-using-r-as-a-calculator.html#additional-tutorials-1"><i class="fa fa-check"></i><b>2.5</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html"><i class="fa fa-check"></i><b>3</b> Tutorial: Working with data (files)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#defining-your-working-directory"><i class="fa fa-check"></i><b>3.1</b> Defining your working directory</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#optional-setting-the-working-directory-on-a-remote-desktop"><i class="fa fa-check"></i><b>3.1.1</b> Optional: Setting the working directory on a remote desktop</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#import-data-from-your-working-directory"><i class="fa fa-check"></i><b>3.2</b> Import data from your working directory</a></li>
<li class="chapter" data-level="3.3" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#subsetting-variables-columns-in-data-frames"><i class="fa fa-check"></i><b>3.3</b> Subsetting variables / columns in data frames</a></li>
<li class="chapter" data-level="3.4" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#subsetting-observations-rows-in-data-frames"><i class="fa fa-check"></i><b>3.4</b> Subsetting observations / rows in data frames</a></li>
<li class="chapter" data-level="3.5" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#subsetting-values-cells-in-data-frames"><i class="fa fa-check"></i><b>3.5</b> Subsetting values / cells in data frames</a></li>
<li class="chapter" data-level="3.6" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#subsetting-data-with-conditions"><i class="fa fa-check"></i><b>3.6</b> Subsetting data with conditions</a></li>
<li class="chapter" data-level="3.7" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#take-aways-2"><i class="fa fa-check"></i><b>3.7</b> Take-Aways</a></li>
<li class="chapter" data-level="3.8" data-path="tutorial-working-with-data-files.html"><a href="tutorial-working-with-data-files.html#additional-tutorials-2"><i class="fa fa-check"></i><b>3.8</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html"><i class="fa fa-check"></i>Exercise 1</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html#task-1"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html#task-2"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html#task-3"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html#task-4"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html#task-5"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="exercise-1.html"><a href="exercise-1.html#task-6"><i class="fa fa-check"></i>Task 6</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html"><i class="fa fa-check"></i><b>4</b> Tutorial: Data management with tidyverse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#why-not-stick-with-base-r"><i class="fa fa-check"></i><b>4.1</b> Why not stick with Base R?</a></li>
<li class="chapter" data-level="4.2" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#tidyverse-packages"><i class="fa fa-check"></i><b>4.2</b> Tidyverse packages</a></li>
<li class="chapter" data-level="4.3" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>4.3</b> Tidy data</a></li>
<li class="chapter" data-level="4.4" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#the-pipe-operator"><i class="fa fa-check"></i><b>4.4</b> The pipe operator</a></li>
<li class="chapter" data-level="4.5" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#data-transformation-with-dplyr"><i class="fa fa-check"></i><b>4.5</b> Data transformation with dplyr</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#select"><i class="fa fa-check"></i><b>4.5.1</b> select()</a></li>
<li class="chapter" data-level="4.5.2" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#filter"><i class="fa fa-check"></i><b>4.5.2</b> filter()</a></li>
<li class="chapter" data-level="4.5.3" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#arrange"><i class="fa fa-check"></i><b>4.5.3</b> arrange()</a></li>
<li class="chapter" data-level="4.5.4" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#mutate"><i class="fa fa-check"></i><b>4.5.4</b> mutate()</a></li>
<li class="chapter" data-level="4.5.5" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#summarize-group_by"><i class="fa fa-check"></i><b>4.5.5</b> summarize() [+ group_by()]</a></li>
<li class="chapter" data-level="4.5.6" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#chaining-functions-in-a-pipe"><i class="fa fa-check"></i><b>4.5.6</b> Chaining functions in a pipe</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#take-aways-3"><i class="fa fa-check"></i><b>4.6</b> Take-Aways</a></li>
<li class="chapter" data-level="4.7" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#additional-tutorials-3"><i class="fa fa-check"></i><b>4.7</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html"><i class="fa fa-check"></i>Exercise 2: Test your knowledge</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-1-1"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-2-1"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-3-1"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-4-1"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-5-1"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-6-1"><i class="fa fa-check"></i>Task 6</a></li>
<li class="chapter" data-level="" data-path="exercise-2-test-your-knowledge.html"><a href="exercise-2-test-your-knowledge.html#task-7"><i class="fa fa-check"></i>Task 7</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html"><i class="fa fa-check"></i><b>5</b> Tutorial: Data visualization with ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#why-not-stick-with-base-r-1"><i class="fa fa-check"></i><b>5.1</b> Why not stick with Base R?</a></li>
<li class="chapter" data-level="5.2" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#components-of-a-ggplot-graph"><i class="fa fa-check"></i><b>5.2</b> Components of a ggplot graph</a></li>
<li class="chapter" data-level="5.3" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#installing-activating-ggplot"><i class="fa fa-check"></i><b>5.3</b> Installing &amp; activating ggplot</a></li>
<li class="chapter" data-level="5.4" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#building-your-first-plot"><i class="fa fa-check"></i><b>5.4</b> Building your first plot</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#data"><i class="fa fa-check"></i><b>5.4.1</b> Data</a></li>
<li class="chapter" data-level="5.4.2" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#aesthetics"><i class="fa fa-check"></i><b>5.4.2</b> Aesthetics</a></li>
<li class="chapter" data-level="5.4.3" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#geometrics"><i class="fa fa-check"></i><b>5.4.3</b> Geometrics</a></li>
<li class="chapter" data-level="5.4.4" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#scales"><i class="fa fa-check"></i><b>5.4.4</b> Scales</a></li>
<li class="chapter" data-level="5.4.5" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#themes"><i class="fa fa-check"></i><b>5.4.5</b> Themes</a></li>
<li class="chapter" data-level="5.4.6" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#labs"><i class="fa fa-check"></i><b>5.4.6</b> Labs</a></li>
<li class="chapter" data-level="5.4.7" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#facets"><i class="fa fa-check"></i><b>5.4.7</b> Facets</a></li>
<li class="chapter" data-level="5.4.8" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#saving-graphs"><i class="fa fa-check"></i><b>5.4.8</b> Saving graphs</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#other-common-plot-types"><i class="fa fa-check"></i><b>5.5</b> Other common plot types</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#bar-plots"><i class="fa fa-check"></i><b>5.5.1</b> bar plots</a></li>
<li class="chapter" data-level="5.5.2" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#box-plots"><i class="fa fa-check"></i><b>5.5.2</b> box plots</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#take-aways-4"><i class="fa fa-check"></i><b>5.6</b> Take Aways</a></li>
<li class="chapter" data-level="5.7" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#additional-tutorials-4"><i class="fa fa-check"></i><b>5.7</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-3-test-your-knowledge.html"><a href="exercise-3-test-your-knowledge.html"><i class="fa fa-check"></i>Exercise 3: Test your knowledge</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-3-test-your-knowledge.html"><a href="exercise-3-test-your-knowledge.html#task-1-2"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="exercise-3-test-your-knowledge.html"><a href="exercise-3-test-your-knowledge.html#task-2-2"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="exercise-3-test-your-knowledge.html"><a href="exercise-3-test-your-knowledge.html#task-3-2"><i class="fa fa-check"></i>Task 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html"><i class="fa fa-check"></i>Exercise 4: Test your knowledge</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-1-3"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-2-3"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-3-3"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-4-2"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-5-2"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-6-2"><i class="fa fa-check"></i>Task 6</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-7-1"><i class="fa fa-check"></i>Task 7</a></li>
<li class="chapter" data-level="" data-path="exercise-4-test-your-knowledge.html"><a href="exercise-4-test-your-knowledge.html#task-8"><i class="fa fa-check"></i>Task 8</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html"><i class="fa fa-check"></i><b>6</b> Tutorial: Text manipulation with stringr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html#whats-stringr"><i class="fa fa-check"></i><b>6.1</b> What’s stringr?</a></li>
<li class="chapter" data-level="6.2" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html#working-with-strings"><i class="fa fa-check"></i><b>6.2</b> Working with strings</a></li>
<li class="chapter" data-level="6.3" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html#working-with-string-patterns"><i class="fa fa-check"></i><b>6.3</b> Working with string patterns</a></li>
<li class="chapter" data-level="6.4" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html#working-with-regular-expressions"><i class="fa fa-check"></i><b>6.4</b> Working with regular expressions</a></li>
<li class="chapter" data-level="6.5" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html#take-aways-5"><i class="fa fa-check"></i><b>6.5</b> Take-Aways</a></li>
<li class="chapter" data-level="6.6" data-path="tutorial-text-manipulation-with-stringr.html"><a href="tutorial-text-manipulation-with-stringr.html#additional-tutorials-5"><i class="fa fa-check"></i><b>6.6</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html"><i class="fa fa-check"></i>Exercise 5: Test your knowledge</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-1-4"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-2-4"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-3-4"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-4-3"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-5-3"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-6-3"><i class="fa fa-check"></i>Task 6</a></li>
<li class="chapter" data-level="" data-path="exercise-5-test-your-knowledge.html"><a href="exercise-5-test-your-knowledge.html#task-7-2"><i class="fa fa-check"></i>Task 7</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html"><i class="fa fa-check"></i><b>7</b> Tidy text analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#what-is-tidy-text"><i class="fa fa-check"></i><b>7.1</b> What is tidy text?</a></li>
<li class="chapter" data-level="7.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#preprocessing-real-world-data"><i class="fa fa-check"></i><b>7.2</b> Preprocessing real-world data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#tokenization"><i class="fa fa-check"></i><b>7.2.1</b> Tokenization</a></li>
<li class="chapter" data-level="" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#practice-tokenization"><i class="fa fa-check"></i>Practice: Tokenization</a></li>
<li class="chapter" data-level="7.2.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#stop-word-removal"><i class="fa fa-check"></i><b>7.2.2</b> Stop word removal</a></li>
<li class="chapter" data-level="" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#practice-stop-word-removal"><i class="fa fa-check"></i>Practice: Stop word removal</a></li>
<li class="chapter" data-level="7.2.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#lemmatizing-stemming"><i class="fa fa-check"></i><b>7.2.3</b> Lemmatizing &amp; stemming</a></li>
<li class="chapter" data-level="" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#practice-lemmatizing-stemming"><i class="fa fa-check"></i>Practice: Lemmatizing &amp; stemming</a></li>
<li class="chapter" data-level="7.2.4" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#pruning"><i class="fa fa-check"></i><b>7.2.4</b> Pruning</a></li>
<li class="chapter" data-level="" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#practice-pruning"><i class="fa fa-check"></i>Practice: Pruning</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#relative-word-frequencies"><i class="fa fa-check"></i><b>7.3</b> (Relative) word frequencies</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#advanced-word-frequency-comparisons"><i class="fa fa-check"></i><b>7.3.1</b> Advanced: Word frequency comparisons</a></li>
<li class="chapter" data-level="7.3.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#advanced-word-log-odds"><i class="fa fa-check"></i><b>7.3.2</b> Advanced: Word log odds</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#topic-modeling"><i class="fa fa-check"></i><b>7.4</b> Topic modeling</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#first-steps"><i class="fa fa-check"></i><b>7.4.1</b> First steps</a></li>
<li class="chapter" data-level="7.4.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#model-estimation-number-of-topics"><i class="fa fa-check"></i><b>7.4.2</b> Model estimation: Number of topics</a></li>
<li class="chapter" data-level="" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#practice-model-estimation"><i class="fa fa-check"></i>Practice: Model estimation</a></li>
<li class="chapter" data-level="7.4.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#inspect-the-topics"><i class="fa fa-check"></i><b>7.4.3</b> Inspect the topics</a></li>
<li class="chapter" data-level="7.4.4" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#stms"><i class="fa fa-check"></i><b>7.4.4</b> STMs</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>7.5</b> Sentiment analysis</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#sentiment-over-time"><i class="fa fa-check"></i><b>7.5.1</b> Sentiment over time</a></li>
<li class="chapter" data-level="" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#practice-sentiment-over-time"><i class="fa fa-check"></i>Practice: Sentiment over time</a></li>
<li class="chapter" data-level="7.5.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#sentiment-over-time-periods"><i class="fa fa-check"></i><b>7.5.2</b> Sentiment over time periods</a></li>
<li class="chapter" data-level="7.5.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#sentiment-of-individual-users"><i class="fa fa-check"></i><b>7.5.3</b> Sentiment of individual users</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#take-aways-6"><i class="fa fa-check"></i><b>7.6</b> Take-Aways</a></li>
<li class="chapter" data-level="7.7" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#additional-tutorials-6"><i class="fa fa-check"></i><b>7.7</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#solutions-for-exercise-1"><i class="fa fa-check"></i>Solutions for Exercise 1</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-1-5"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-2-5"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-3-5"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-4-4"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-5-4"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-6-4"><i class="fa fa-check"></i>Task 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#solutions-for-exercise-2"><i class="fa fa-check"></i>Solutions for Exercise 2</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-1-6"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-2-6"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-3-6"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-4-5"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-5-5"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-6-5"><i class="fa fa-check"></i>Task 6</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-7-3"><i class="fa fa-check"></i>Task 7</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#solutions-for-exercise-3"><i class="fa fa-check"></i>Solutions for Exercise 3</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-1-7"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-2-7"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-3-7"><i class="fa fa-check"></i>Task 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#solutions-for-exercise-4"><i class="fa fa-check"></i>Solutions for Exercise 4</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-1-8"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-2-8"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-3-8"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-4-6"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-5-6"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-6-6"><i class="fa fa-check"></i>Task 6</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-7-4"><i class="fa fa-check"></i>Task 7</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-8-1"><i class="fa fa-check"></i>Task 8</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#solutions-for-exercise-5"><i class="fa fa-check"></i>Solutions for Exercise 5</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-1-9"><i class="fa fa-check"></i>Task 1</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-2-9"><i class="fa fa-check"></i>Task 2</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-3-9"><i class="fa fa-check"></i>Task 3</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-4-7"><i class="fa fa-check"></i>Task 4</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-5-7"><i class="fa fa-check"></i>Task 5</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-6-7"><i class="fa fa-check"></i>Task 6</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-7-5"><i class="fa fa-check"></i>Task 7</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#solutions-for-exercise-6"><i class="fa fa-check"></i>Solutions for Exercise 6</a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-1-tokenization"><i class="fa fa-check"></i>Task 1: Tokenization</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-2-stop-word-removal"><i class="fa fa-check"></i>Task 2: Stop word removal</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-3-lemmatizing-stemming"><i class="fa fa-check"></i>Task 3: Lemmatizing &amp; stemming</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-4-pruning"><i class="fa fa-check"></i>Task 4: Pruning</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-5-model-estimation"><i class="fa fa-check"></i>Task 5: Model estimation</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-6-word-topic-probabilities"><i class="fa fa-check"></i>Task 6: Word-topic probabilities</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-7-document-topic-probabilities"><i class="fa fa-check"></i>Task 7: Document-topic probabilities</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-8-sentiment-over-time"><i class="fa fa-check"></i>Task 8: Sentiment over time</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#task-9-sentiment-over-time-periods"><i class="fa fa-check"></i>Task 9: Sentiment over time periods</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/LKobilke/PR-Erfolgskontrolle" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for PR evaluation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-text-analysis" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number"> 7</span> Tidy text analysis<a href="tidy-text-analysis.html#tidy-text-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>After working through Tutorial 7, you’ll…</p>
<ul>
<li>understand the concept of tidy text</li>
<li>know how to combine tidy text management approaches with regular
expressions</li>
<li>be able to produce first analyses, e.g., word frequencies</li>
</ul>
<div id="what-is-tidy-text" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> What is tidy text?<a href="tidy-text-analysis.html#what-is-tidy-text" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Since you’ve already learnt what tidy data is (see <a href="tutorial-data-management-with-tidyverse.html#tidy-data">Tidy data</a>), you can
make an educated guess about the meaning of “tidy text”! In contrast to
the ways text is commonly stored in existing text analysis approaches
(e.g., as strings or document-term matrices), <strong><em>the tidy text format is
a table with one single token per row</em></strong> (token = the unit of analysis).
A token is a meaningful unit of text, i.e., a word, a sentence, or a
paragraph that we are interested in using for further analysis.
Splitting text into tokens is what we call the process of
<em>tokenization</em>.</p>
<p>Julia Silge and David Robinson’s <a href="https://cran.r-project.org/web/packages/tidytext/vignettes/tidytext.html">tidytext
package</a>
makes tokenizing into the tidy text format simple! Moreover, the
<code>tidytext</code> package builds upon <code>tidyverse</code> and <code>ggplot2</code>, which makes it
easy to use for you, since you already know these packages (see
<a href="tutorial-data-management-with-tidyverse.html#tutorial-data-management-with-tidyverse">Tutorial: Data management with tidyverse</a> and <a href="tutorial-data-visualization-with-ggplot.html#tutorial-data-visualization-with-ggplot">Tutorial: Data
visualization with ggplot</a> for a recap). That’s why we’ll focus on the
<code>tidytext</code> in this breakout session.</p>
<p>This tutorial is based on Julia Silge and David Robinson’s open-access
book <a href="https://www.tidytextmining.com/">“Text Mining in R. A Tidy
Approach”</a> and a lot of the following
code was actually written by Julia Silge. If you want to dig deeper into
tidy text analysis, you should check the book out. Both authors have
also created an informative flowchart of the tidy text analysis
workflow:</p>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><em>Image: Tidy Text Analysis Workflow</em></td>
</tr>
<tr class="even">
<td align="left"><img src="images/Tut_tidytext_principles.JPG" /></td>
</tr>
</tbody>
</table>
<p>Before we start, install and load the <code>tidytext</code> package, the
<code>tidyverse</code> package &amp; the <code>lubridate</code> package. <code>lubridate</code> will convert
dates to a standard format, making it easier to create graphs using time
data. Since tweets come with a date column, it’s always useful to have
the <code>lubridate</code> package loaded.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="tidy-text-analysis.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># installing/loading the package:</span></span>
<span id="cb217-2"><a href="tidy-text-analysis.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidytext)) {</span>
<span id="cb217-3"><a href="tidy-text-analysis.html#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;tidytext&quot;</span>); </span>
<span id="cb217-4"><a href="tidy-text-analysis.html#cb217-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(tidytext)</span>
<span id="cb217-5"><a href="tidy-text-analysis.html#cb217-5" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load tidytext</span></span>
<span id="cb217-6"><a href="tidy-text-analysis.html#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="tidy-text-analysis.html#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co"># installing/loading lubridate:</span></span>
<span id="cb217-8"><a href="tidy-text-analysis.html#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(lubridate)) {</span>
<span id="cb217-9"><a href="tidy-text-analysis.html#cb217-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>); </span>
<span id="cb217-10"><a href="tidy-text-analysis.html#cb217-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(lubridate)</span>
<span id="cb217-11"><a href="tidy-text-analysis.html#cb217-11" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load lubridate</span></span>
<span id="cb217-12"><a href="tidy-text-analysis.html#cb217-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-13"><a href="tidy-text-analysis.html#cb217-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb217-14"><a href="tidy-text-analysis.html#cb217-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb217-15"><a href="tidy-text-analysis.html#cb217-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="preprocessing-real-world-data" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Preprocessing real-world data<a href="tidy-text-analysis.html#preprocessing-real-world-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s investigate what the <code>tidytext</code> package is capable of and apply it
to some real-world data. I’ve provided you with a data file that
contains data collected with the Twitter API about the Russian
aggression against Ukraine on Moodle.</p>
<p>Let’s import the data into RStudio and inspect it using the <code>View()</code>
function.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="tidy-text-analysis.html#cb218-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;ukraine_tweets2.csv&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) <span class="co"># Use UTF-8 encoding to keep the smileys</span></span>
<span id="cb218-2"><a href="tidy-text-analysis.html#cb218-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-3"><a href="tidy-text-analysis.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">TZ=</span><span class="st">&quot;UTC&quot;</span>) <span class="co"># Twitter gives a UTC timestamp, so we&#39;ll need to set our own environment to UTC, too</span></span>
<span id="cb218-4"><a href="tidy-text-analysis.html#cb218-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb218-5"><a href="tidy-text-analysis.html#cb218-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time =</span> lubridate<span class="sc">::</span><span class="fu">ymd_hms</span>(time)) <span class="sc">%&gt;%</span>  <span class="co"># turn the data column into a proper format with the lubridate package (this helps to create time series graphs!)</span></span>
<span id="cb218-6"><a href="tidy-text-analysis.html#cb218-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>()</span>
<span id="cb218-7"><a href="tidy-text-analysis.html#cb218-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-8"><a href="tidy-text-analysis.html#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(data)</span></code></pre></div>
<p>This data set contains a lot of information! We get to know who wrote
the tweet (<em>user</em> and the unique <em>user.id</em>) and where this person lives
(<em>user.location</em>). But most importantly, we can find the text of the
tweet in the column <em>full_text</em>.</p>
<p>First of all, let’s reduce some of these columns that we don’t need for
our text analysis.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="tidy-text-analysis.html#cb219-1" aria-hidden="true" tabindex="-1"></a>data_short <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb219-2"><a href="tidy-text-analysis.html#cb219-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(time, user, full_text) <span class="co"># keeps time, user, and full_text</span></span>
<span id="cb219-3"><a href="tidy-text-analysis.html#cb219-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-4"><a href="tidy-text-analysis.html#cb219-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(data_short)</span></code></pre></div>
<p>Now, to get an overview, let’s create a visualization of the user’s who
posted at least 18 tweets.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="tidy-text-analysis.html#cb220-1" aria-hidden="true" tabindex="-1"></a>data_short <span class="sc">%&gt;%</span></span>
<span id="cb220-2"><a href="tidy-text-analysis.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user) <span class="sc">%&gt;%</span></span>
<span id="cb220-3"><a href="tidy-text-analysis.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb220-4"><a href="tidy-text-analysis.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">18</span>) <span class="sc">%&gt;%</span></span>
<span id="cb220-5"><a href="tidy-text-analysis.html#cb220-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> user, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb220-6"><a href="tidy-text-analysis.html#cb220-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">&quot;bar&quot;</span>) <span class="sc">+</span></span>
<span id="cb220-7"><a href="tidy-text-analysis.html#cb220-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb220-8"><a href="tidy-text-analysis.html#cb220-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.00</span>, <span class="at">hjust =</span> <span class="fl">0.00</span>)) <span class="sc">+</span></span>
<span id="cb220-9"><a href="tidy-text-analysis.html#cb220-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Users who posted the most tweets about the Russian</span><span class="sc">\n</span><span class="st">aggression against Ukraine&quot;</span>,</span>
<span id="cb220-10"><a href="tidy-text-analysis.html#cb220-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;User name&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of Tweets&quot;</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-130-1.png" width="672" /></p>
<p>Now that we have had our overview, we will start with a process called
<em>text normalization</em>. Text normalization is the endeavor to minimize the
variability of a text by bringing it closer to a specified “standard” by
reducing the quantity of divergent data that the computer has to deal
with. In plain English, this means that our goal is to reduce the amount
of text to a small set of words that are especially suitable to explain
similarities and differences between tweets and, more interestingly,
between the accounts that have published these tweets. Overall, text
normalization boosts efficiency. Some techniques of text normalization
will be covered in the next few sections, for example, tokenization,
stop word removal, stemming/lemmatization and pruning. You could add
additional steps, e.g. spelling corrections to reduce misspellings that
increase word variance, but we won’t cover all text normalization steps
in this tutorial.</p>
<div id="tokenization" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Tokenization<a href="tidy-text-analysis.html#tokenization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I think we are ready to tokenize the data with the amazing
<code>unnest_tokens()</code> function of the <code>tidytext</code> package. <em>Tokenization</em> is
the process of breaking text into words (and punctuation marks). Since
scientists are almost never interested in the punctuation marks and will
delete them from the data set later anyway, <code>unnest_tokens()</code> comes with
the nice bonus of setting all text to lowercase and deleting the
punctuation marks directly, leaving only words (and numbers) as tokens.</p>
<p>We will use the highly specialized <code>token = "tweets"</code> option of the
<code>tidytext package</code> (by <a href="https://cran.r-project.org/web/packages/tokenizers/index.html">Mullen
2016</a>),
which preserves hashtags and mentions of users with the @ sign from the
direct punctuation removal process performed by <code>unnest tokens()</code>.</p>
<p>Another common practice is to remove all tokens that contain numbers.
Depending on the research question, it can also be helpful to remove
URLs. For illustrative purposes, we will do both. But keep in mind that
removing all URLs will take the option from you to compare what accounts
have shared certain URLs more frequently than others.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="tidy-text-analysis.html#cb221-1" aria-hidden="true" tabindex="-1"></a>remove_reg <span class="ot">&lt;-</span> <span class="st">&quot;&amp;amp;|&amp;lt;|&amp;gt;&quot;</span> <span class="co"># &amp;amp; = &amp; in HTML,  &amp;lt; = &lt; in HTML,   &amp;gt; = &gt; in HTML</span></span>
<span id="cb221-2"><a href="tidy-text-analysis.html#cb221-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-3"><a href="tidy-text-analysis.html#cb221-3" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="ot">&lt;-</span> data_short <span class="sc">%&gt;%</span></span>
<span id="cb221-4"><a href="tidy-text-analysis.html#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tweet =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> <span class="co"># creates a new column that is called &quot;tweet&quot;, which contains a unique id for each individual tweet based on its row number</span></span>
<span id="cb221-5"><a href="tidy-text-analysis.html#cb221-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(full_text, <span class="st">&quot;^RT&quot;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># removes all retweets, i.e., tweets that are not unique but a reposts</span></span>
<span id="cb221-6"><a href="tidy-text-analysis.html#cb221-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">str_remove_all</span>(full_text, remove_reg)) <span class="sc">%&gt;%</span>  <span class="co"># remove special HTML characters (&amp;, &lt;, &gt;)</span></span>
<span id="cb221-7"><a href="tidy-text-analysis.html#cb221-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, full_text, <span class="at">token =</span> <span class="st">&quot;tweets&quot;</span>) <span class="sc">%&gt;%</span>      <span class="co"># using `to_lower = TRUE` with `token = &#39;tweets&#39;` can break URLs, so be sure that you don&#39;t need them</span></span>
<span id="cb221-8"><a href="tidy-text-analysis.html#cb221-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^[:digit:]+$&quot;</span>)) <span class="sc">%&gt;%</span>             <span class="co"># remove all words that are numbers, e.g. &quot;2020&quot;</span></span>
<span id="cb221-9"><a href="tidy-text-analysis.html#cb221-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^http&quot;</span>)) <span class="sc">%&gt;%</span>                    <span class="co"># remove all words that are a URL, e.g., (https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_strings.pdf)</span></span>
<span id="cb221-10"><a href="tidy-text-analysis.html#cb221-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^(</span><span class="sc">\\</span><span class="st">+)+$&quot;</span>)) <span class="sc">%&gt;%</span>                 <span class="co">#  remove all words that only consist of plus signs (e.g., &quot;+++&quot;)</span></span>
<span id="cb221-11"><a href="tidy-text-analysis.html#cb221-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^(</span><span class="sc">\\</span><span class="st">+)+(.)+$&quot;</span>)) <span class="sc">%&gt;%</span>             <span class="co">#  remove all words that only consist of plus signs followed by any other characters (e.g., &quot;+++eil+++&quot;)</span></span>
<span id="cb221-12"><a href="tidy-text-analysis.html#cb221-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^(</span><span class="sc">\\</span><span class="st">-)+$&quot;</span>)) <span class="sc">%&gt;%</span>                 <span class="co">#  remove all words that only consist of plus signs (e.g., &quot;---&quot;)</span></span>
<span id="cb221-13"><a href="tidy-text-analysis.html#cb221-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^(</span><span class="sc">\\</span><span class="st">-)+(.)+$&quot;</span>)) <span class="sc">%&gt;%</span>             <span class="co">#  remove all words that only consist of minus signs followed by any other characters (e.g., &quot;---eil---&quot;)</span></span>
<span id="cb221-14"><a href="tidy-text-analysis.html#cb221-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;^(.)+(</span><span class="sc">\\</span><span class="st">+)+$&quot;</span>))                 <span class="co"># remove all words that start with some kind of word followed by plus signs (e.g., &quot;news+++&quot;)</span></span>
<span id="cb221-15"><a href="tidy-text-analysis.html#cb221-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-16"><a href="tidy-text-analysis.html#cb221-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_tknzd)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   time                user     tweet text                                  word 
##   &lt;dttm&gt;              &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;                                 &lt;chr&gt;
## 1 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… @von…
## 2 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… @euc…
## 3 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… rubb…
## 4 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… your 
## 5 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… words
## 6 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… and</code></pre>
<p>As you can see, <code>unnest tokens()</code> in combination with the
<code>token = "tweets"</code> option has kept all mentions as tokens. Add
<code>%&gt;% filter(!str_detect(word, "^@"))</code> at the end of the above presented
code if you want to remove these, too.</p>
<p>Now, let’s check the total number of unique words in our tweet data:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="tidy-text-analysis.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;We are investigating &quot;</span>, <span class="fu">dim</span>(data_tknzd)[<span class="dv">1</span>], <span class="st">&quot; non-unique features / words and &quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(data_tknzd<span class="sc">$</span>word)), <span class="st">&quot; unique features / words.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;We are investigating  250299  non-unique features / words and  23579  unique features / words.&quot;</code></pre>
<p><strong>Remember:</strong> <code>unnest tokens()</code> comes with a few handy preprocessing
features, i.e., it already turns the text into a standardized format for
further analysis:</p>
<ol style="list-style-type: decimal">
<li>Tweet ids from which each word originated are kept in the data frame
(column: <em>tweet</em>).</li>
<li>All punctuation has already been taken care of, i.e., dots,
questions marks, etc. have been removed.</li>
<li>All uppercase letters have been taken care of, i.e., words have been
transformed to lowercase.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></li>
</ol>
</div>
<div id="practice-tokenization" class="section level3 unnumbered hasAnchor">
<h3>Practice: Tokenization<a href="tidy-text-analysis.html#practice-tokenization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now it’s your turn. I’ve added another data set to Moodle that deals
with the shitstorm about the German influencer <em>Fynn Kliemann</em> on
Twitter. You can read more about the scandal that started on the 6th of
May 2022
<a href="https://www.augsburger-allgemeine.de/panorama/fynn-kliemann-ist-seine-karriere-nach-masken-skandal-vorbei-id62699096.html">here</a>
if you feel that you need more information.</p>
<p>Load the Kliemann data into RStudio. Use the tutorial code to set
the encoding. After loading the Kliemann data keep only the <em>time</em>,
<em>user</em>, and <em>full_text</em> column.</p>
<p>Next, try to tokenize the data. As an extra, delete all tokens that are
mentions of other twitter users (i.e., that start with an @-smybol).</p>
<p>For solutions see: <a href="solutions.html#solutions-for-exercise-6">Solutions for Exercise 6</a></p>
</div>
<div id="stop-word-removal" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Stop word removal<a href="tidy-text-analysis.html#stop-word-removal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we should get rid of stop words. Stop words are a group of words
that are regularly used in a language. In English, stop words such as
“the,” “is,” and “and” would qualify. Because stop words are so common,
they don’t really tell us anything about the content of a tweet and what
differentiates this tweet from other tweets. The <code>tidytext</code> package
comes with a pre-installed stop word data set. Let’s save that data set
to a source object called <em>stop_word_data</em>. This way, we can use it
later.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="tidy-text-analysis.html#cb225-1" aria-hidden="true" tabindex="-1"></a>stop_word_data <span class="ot">&lt;-</span> tidytext<span class="sc">::</span>stop_words</span>
<span id="cb225-2"><a href="tidy-text-analysis.html#cb225-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-3"><a href="tidy-text-analysis.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(stop_word_data, <span class="dv">20</span>) <span class="co"># prints the first 20 stop words to the console</span></span></code></pre></div>
<pre><code>## # A tibble: 20 × 2
##    word        lexicon
##    &lt;chr&gt;       &lt;chr&gt;  
##  1 a           SMART  
##  2 a&#39;s         SMART  
##  3 able        SMART  
##  4 about       SMART  
##  5 above       SMART  
##  6 according   SMART  
##  7 accordingly SMART  
##  8 across      SMART  
##  9 actually    SMART  
## 10 after       SMART  
## 11 afterwards  SMART  
## 12 again       SMART  
## 13 against     SMART  
## 14 ain&#39;t       SMART  
## 15 all         SMART  
## 16 allow       SMART  
## 17 allows      SMART  
## 18 almost      SMART  
## 19 alone       SMART  
## 20 along       SMART</code></pre>
<p>Now, let’s use these stop words to remove all tokens that are stop words
from our tweet data.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="tidy-text-analysis.html#cb227-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span> </span>
<span id="cb227-2"><a href="tidy-text-analysis.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>word <span class="sc">%in%</span> stop_word_data<span class="sc">$</span>word) <span class="sc">%&gt;%</span>  <span class="co"># removes all of our tokens that are stop words</span></span>
<span id="cb227-3"><a href="tidy-text-analysis.html#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>word <span class="sc">%in%</span> <span class="fu">str_remove_all</span>(stop_word_data<span class="sc">$</span>word, <span class="st">&quot;&#39;&quot;</span>)) <span class="co"># first removes all &#39; from the stop words (e.g., ain&#39;t -&gt; aint) and then removes all of our tokens that resemble these stop words without punctuation</span></span></code></pre></div>
</div>
<div id="practice-stop-word-removal" class="section level3 unnumbered hasAnchor">
<h3>Practice: Stop word removal<a href="tidy-text-analysis.html#practice-stop-word-removal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now it’s your turn. The Kliemann data is in German, so you can’t use the
<code>tidytext</code> stop word list, which is meant for English text only. So
install and load the ‘stopwords’ package that allows you to create a
dataframe that contains German stop words by using this command:
<code>stop_word_german &lt;- data.frame(word = stopwords::stopwords("de"), stringsAsFactors = FALSE)</code>.
Create your German stop word list and use it to remove stop words from
your tokens.</p>
<p>For solutions see: <a href="solutions.html#solutions-for-exercise-6">Solutions for Exercise 6</a></p>
</div>
<div id="lemmatizing-stemming" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Lemmatizing &amp; stemming<a href="tidy-text-analysis.html#lemmatizing-stemming" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Minimizing words to their basic form (<em>lemmatizing</em>) or root
(<em>stemming</em>) is a typical strategy of reducing the number of words in a
text.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Stemming:</strong> A stem is the root form of a word without any
suffixes. A stemming algorithm (= <em>stemmer</em>) removes the suffixes
and returns the stem of the word. <em>Example1:</em> vengeance –&gt;
vengeanc, or, if you use a very aggressive stemmer, vengeance –&gt;
veng || <em>Example2</em>: legions –&gt; legion, or, if you use a very
aggressive stemmer, legions –&gt; leg (this one is problematic!) ||
<em>Example3</em>: murdered –&gt; murder</p></li>
<li><p><strong>Lemmatization:</strong> A lemma is a lexicon headword or, i.e., the
dictionary-matched basic form of a word (as opposed to a stem
created by eliminating or changing suffixes). Because a lemmatizing
algorithm (= <em>lemmatizer</em>) performs dictionary matching,
lemmatization is more computationally demanding than stemming.
vengeance –&gt; vengeance || <em>Example2</em>: legions –&gt; legion ||
<em>Example3</em>: murdered –&gt; murdered (this one is problematic!)</p></li>
</ol>
<p>Most of the time, stemmers will make a lot of mistakes (e.g., legions
–&gt; leg) and lemmatizers will make fewer mistakes. However, lemmatizers
summarize fewer words (murdered –&gt; murdered) and therefore reduce the
word count less efficiently than stemmers. Which technique of text
normalization is preferred is always determined by the research question
and the available data.</p>
<p>For the ease of teaching, we will use stemming on our tweet data.
However, you could also use lemmatization with the <a href="https://spacyr.quanteda.io/">spacyr
package</a>.</p>
<p>We’ll use Porter’s (1980) stemming algorthm, which is the most
extensively used stemmer for the English language. Porter made the
stemmer open-source, and you may use it with R using the <code>SnowballC</code>
package (Bouchet-Valat 2020).</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="tidy-text-analysis.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># installing/loading SnowballC:</span></span>
<span id="cb228-2"><a href="tidy-text-analysis.html#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(SnowballC)) {</span>
<span id="cb228-3"><a href="tidy-text-analysis.html#cb228-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;SnowballC&quot;</span>); </span>
<span id="cb228-4"><a href="tidy-text-analysis.html#cb228-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(SnowballC)</span>
<span id="cb228-5"><a href="tidy-text-analysis.html#cb228-5" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load SnowballC</span></span>
<span id="cb228-6"><a href="tidy-text-analysis.html#cb228-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-7"><a href="tidy-text-analysis.html#cb228-7" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb228-8"><a href="tidy-text-analysis.html#cb228-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">wordStem</span>(word))</span>
<span id="cb228-9"><a href="tidy-text-analysis.html#cb228-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-10"><a href="tidy-text-analysis.html#cb228-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_tknzd)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   time                user     tweet text                                  word 
##   &lt;dttm&gt;              &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;                                 &lt;chr&gt;
## 1 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… @von…
## 2 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… @euc…
## 3 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… rubb…
## 4 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… word 
## 5 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… fell…
## 6 2022-02-25 18:10:59 peekay14     1 @vonderleyen @EU_Commission rubbish!… eu</code></pre>
<p>Let’s check how many unique words we have in our tweet data after all of
our preprocessing efforts:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="tidy-text-analysis.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;We are investigating &quot;</span>, <span class="fu">dim</span>(data_tknzd)[<span class="dv">1</span>], <span class="st">&quot; non-unique features / words and &quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(data_tknzd<span class="sc">$</span>word)), <span class="st">&quot; unique features / words.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;We are investigating  120056  non-unique features / words and  18792  unique features / words.&quot;</code></pre>
</div>
<div id="practice-lemmatizing-stemming" class="section level3 unnumbered hasAnchor">
<h3>Practice: Lemmatizing &amp; stemming<a href="tidy-text-analysis.html#practice-lemmatizing-stemming" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Please stem the Kliemann data with the PorterStemmer. Since we are
working with German data, you’ll have to add the option
<code>language = "german"</code> to the <code>wordStem()</code> function.</p>
<p>For solutions see: <a href="solutions.html#solutions-for-exercise-6">Solutions for Exercise 6</a></p>
</div>
<div id="pruning" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Pruning<a href="tidy-text-analysis.html#pruning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Finally, words that appear in practically every tweet (i.e., promiscuous
words) or words that that appear only once or twice in the entire data
set (i.e., rare words) are not very helpful for investigating the
“typical” word use of certain Twitter accounts. Since these words do not
contribute to capturing similarities and differences in texts, it is a
good idea to remove them. This process of <em>(relative) pruning</em> is
quickly achieved with the <code>quanteda</code> package. Since I don’t want to
teach you how to use <code>quanteda</code> just yet, I have developed a useful
short cut function that enables you to use relative pruning without
having to learn <code>quanteda</code> functions.</p>
<p>First, install/load the <code>quanteda</code> package and initialize my
<code>prune</code>-function by running this code:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="tidy-text-analysis.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install / load the quanteda package</span></span>
<span id="cb232-2"><a href="tidy-text-analysis.html#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(quanteda)) {</span>
<span id="cb232-3"><a href="tidy-text-analysis.html#cb232-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;quanteda&quot;</span>); </span>
<span id="cb232-4"><a href="tidy-text-analysis.html#cb232-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(quanteda)</span>
<span id="cb232-5"><a href="tidy-text-analysis.html#cb232-5" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load quanteda</span></span>
<span id="cb232-6"><a href="tidy-text-analysis.html#cb232-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-7"><a href="tidy-text-analysis.html#cb232-7" aria-hidden="true" tabindex="-1"></a>prune <span class="ot">&lt;-</span> <span class="cf">function</span>(data, tweet_column, word_column, text_column, user_column, minDocFreq, maxDocFreq) {</span>
<span id="cb232-8"><a href="tidy-text-analysis.html#cb232-8" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">suppressMessages</span>(<span class="fu">library</span>(<span class="st">&quot;quanteda&quot;</span>, <span class="at">quietly =</span> T)))</span>
<span id="cb232-9"><a href="tidy-text-analysis.html#cb232-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab the variable names for later use</span></span>
<span id="cb232-10"><a href="tidy-text-analysis.html#cb232-10" aria-hidden="true" tabindex="-1"></a>tweet_name <span class="ot">&lt;-</span> <span class="fu">substitute</span>(tweet_column)</span>
<span id="cb232-11"><a href="tidy-text-analysis.html#cb232-11" aria-hidden="true" tabindex="-1"></a>word_name <span class="ot">&lt;-</span> <span class="fu">substitute</span>(word_column)</span>
<span id="cb232-12"><a href="tidy-text-analysis.html#cb232-12" aria-hidden="true" tabindex="-1"></a>tweet_name_chr <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">substitute</span>(tweet_column))</span>
<span id="cb232-13"><a href="tidy-text-analysis.html#cb232-13" aria-hidden="true" tabindex="-1"></a>word_name_chr <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">substitute</span>(word_column))</span>
<span id="cb232-14"><a href="tidy-text-analysis.html#cb232-14" aria-hidden="true" tabindex="-1"></a><span class="co"># turn the tidy data frame into a document-feature matrix:</span></span>
<span id="cb232-15"><a href="tidy-text-analysis.html#cb232-15" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb232-16"><a href="tidy-text-analysis.html#cb232-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>({{tweet_column}}, {{text_column}}, {{word_column}}, {{user_column}}) <span class="sc">%&gt;%</span></span>
<span id="cb232-17"><a href="tidy-text-analysis.html#cb232-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>({{tweet_column}}, {{word_column}}, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb232-18"><a href="tidy-text-analysis.html#cb232-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cast_dfm</span>({{tweet_column}}, {{word_column}}, n)</span>
<span id="cb232-19"><a href="tidy-text-analysis.html#cb232-19" aria-hidden="true" tabindex="-1"></a><span class="co"># perform relative pruning:</span></span>
<span id="cb232-20"><a href="tidy-text-analysis.html#cb232-20" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(dfm, </span>
<span id="cb232-21"><a href="tidy-text-analysis.html#cb232-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">min_docfreq =</span> minDocFreq, <span class="co"># remove all words that occur in less than minDocFreq% of all tweets</span></span>
<span id="cb232-22"><a href="tidy-text-analysis.html#cb232-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">max_docfreq =</span> maxDocFreq, <span class="co"># remove all words that occur in more than maxDocFreq% of all tweets</span></span>
<span id="cb232-23"><a href="tidy-text-analysis.html#cb232-23" aria-hidden="true" tabindex="-1"></a>                <span class="at">docfreq_type =</span> <span class="st">&quot;prop&quot;</span>,    <span class="co"># use probabilities</span></span>
<span id="cb232-24"><a href="tidy-text-analysis.html#cb232-24" aria-hidden="true" tabindex="-1"></a>                <span class="at">verbose =</span> <span class="cn">FALSE</span>)          <span class="co"># don&#39;t tell us what you have achieved with relative pruning</span></span>
<span id="cb232-25"><a href="tidy-text-analysis.html#cb232-25" aria-hidden="true" tabindex="-1"></a><span class="co"># turn the document-feature-matrix back into a tidy data frame:</span></span>
<span id="cb232-26"><a href="tidy-text-analysis.html#cb232-26" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">tidy</span>(dfm) <span class="sc">%&gt;%</span> </span>
<span id="cb232-27"><a href="tidy-text-analysis.html#cb232-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>({{word_name}} <span class="sc">:</span><span class="er">=</span> term) <span class="sc">%&gt;%</span> <span class="co"># rename columns so that their names from data_tknzd and data_tknzd2 match</span></span>
<span id="cb232-28"><a href="tidy-text-analysis.html#cb232-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>({{tweet_name}} <span class="sc">:</span><span class="er">=</span> document) <span class="sc">%&gt;%</span></span>
<span id="cb232-29"><a href="tidy-text-analysis.html#cb232-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span> <span class="co"># remove the count column</span></span>
<span id="cb232-30"><a href="tidy-text-analysis.html#cb232-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>({{tweet_name}} <span class="sc">:</span><span class="er">=</span>  <span class="fu">as.integer</span>({{tweet_name}}))</span>
<span id="cb232-31"><a href="tidy-text-analysis.html#cb232-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-32"><a href="tidy-text-analysis.html#cb232-32" aria-hidden="true" tabindex="-1"></a><span class="co"># delete the words that quanteda suggested from the original data</span></span>
<span id="cb232-33"><a href="tidy-text-analysis.html#cb232-33" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">right_join</span>(data, data2, <span class="at">by =</span> <span class="fu">c</span>(word_name_chr,tweet_name_chr)) <span class="sc">%&gt;%</span> <span class="co"># keep only the shorter data set without frequent/rare words, but fill in all other columns like user and date</span></span>
<span id="cb232-34"><a href="tidy-text-analysis.html#cb232-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>({{tweet_name}},{{word_name}}, <span class="at">.keep_all=</span> <span class="cn">TRUE</span>) <span class="co"># remove duplicate rows that have been created during the merging process</span></span>
<span id="cb232-35"><a href="tidy-text-analysis.html#cb232-35" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb232-36"><a href="tidy-text-analysis.html#cb232-36" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now that you have my <code>prune()</code> function running, you can use it to prune
your data. The prune function takes the following arguments:</p>
<ol style="list-style-type: decimal">
<li><strong>data:</strong> the name of your data set (here: <em>data_tknzd</em>),</li>
<li><strong>tweet_column:</strong> the name of the column that contains the tweet ids
(here: <em>tweet</em>)</li>
<li><strong>word_column</strong>: the name of the column that contains the
words/tokens (here: <em>word</em>), the name of the column that contains
the full text of the tweets (here: <em>text</em>)</li>
<li><strong>text_column:</strong> the name of the column that contains the tweets’
full text (here: <em>text</em>)</li>
<li><strong>user_column</strong>: the name of the column that contains the user names
(here: <em>user</em>)</li>
<li><strong>minDocFreq</strong>: the minimum values of a word’s occurrence in tweets,
below which super rare words will be removed (e.g., occurs in less
than 0.01% of all tweets, we choose here: <em>0.001</em>)</li>
<li><strong>maxDocFreq</strong>: the maximum values of a word’s occurrence in tweets,
above which super promiscuous words will be removed (e.g., occurs in
more than 95% of all tweets, we choose here: <em>0.95</em>)</li>
</ol>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="tidy-text-analysis.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install / load the quanteda package for topic modeling</span></span>
<span id="cb233-2"><a href="tidy-text-analysis.html#cb233-2" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="ot">&lt;-</span> <span class="fu">prune</span>(data_tknzd,tweet,word,text,user, <span class="fl">0.001</span>, <span class="fl">0.95</span>)</span></code></pre></div>
<p>Finally, now that we have removed very rare and very frequent words,
let’s check the number of our unique words again:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="tidy-text-analysis.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;We are investigating &quot;</span>, <span class="fu">dim</span>(data_tknzd)[<span class="dv">1</span>], <span class="st">&quot; non-unique features / words and &quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(data_tknzd<span class="sc">$</span>word)), <span class="st">&quot; unique features / words.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;We are investigating  83851  non-unique features / words and  1727  unique features / words.&quot;</code></pre>
<p>Great, we have finished the text normalization process! I think we are
ready to take a sneak peek at our most common words! What are the 10
most commonly used words in our tweet data? I’m excited!</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="tidy-text-analysis.html#cb236-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb236-2"><a href="tidy-text-analysis.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb236-3"><a href="tidy-text-analysis.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##    word        n
##    &lt;chr&gt;   &lt;int&gt;
##  1 ukrain   7555
##  2 russia   2115
##  3 putin    1478
##  4 #ukrain  1364
##  5 russian  1241
##  6 peopl    1114
##  7 war      1092
##  8 nato      829
##  9 invas     692
## 10 countri   656</code></pre>
<p><strong>Evaluation:</strong> Shortly after Russia’s invasion of Ukraine began,
Twitter conversations centered on the countries Ukraine, Russia, Putin,
the people, the war, NATO, and the invasion.</p>
</div>
<div id="practice-pruning" class="section level3 unnumbered hasAnchor">
<h3>Practice: Pruning<a href="tidy-text-analysis.html#practice-pruning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Please, try the <code>prune</code> function for yourself. Prune the Kliemann data
and remove 1) words that occur in less than 0.03% of all tweets and 2)
words that occur in more than 95% of all tweets. <strong>Beware:</strong> Pruning is
a demanding task, therefore your machine might need a while to complete
the computations. Wait until the red stop sign in your console vanishes.</p>
<p>For solutions see: <a href="solutions.html#solutions-for-exercise-6">Solutions for Exercise 6</a></p>
</div>
</div>
<div id="relative-word-frequencies" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> (Relative) word frequencies<a href="tidy-text-analysis.html#relative-word-frequencies" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have finished our text normalization process, let’s get to
know our data. Let’s first look at the absolute word frequencies of the
5 most active Twitter accounts in our data set to get to know them
better. For this, we need to group our data by the most active Twitter
accounts and count how many times each user used each word.</p>
<p>Why is it intresting to know what words are used by what Twitter
account? Word usage reveals a lot about the agenda and thought processes
of communciators. Words have power, especially in times of conflict.
Words, for example, might help define who is seen as the attacker and
who is seen as the defender. It matters whether I call something an
“attack” or a “war”, since an aggression is a unilateral act of
invasion, while a war is a reciprocal relationship that has two parties
involved.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="tidy-text-analysis.html#cb238-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb238-2"><a href="tidy-text-analysis.html#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user) <span class="sc">%&gt;%</span></span>
<span id="cb238-3"><a href="tidy-text-analysis.html#cb238-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb238-4"><a href="tidy-text-analysis.html#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb238-5"><a href="tidy-text-analysis.html#cb238-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">102</span>)</span></code></pre></div>
<pre><code>## # A tibble: 19 × 2
##    user                n
##    &lt;chr&gt;           &lt;int&gt;
##  1 DaveClubMember1   570
##  2 common_sense54    553
##  3 EdCutter1         444
##  4 Seyahsm2          324
##  5 BaloIreen         193
##  6 AlinaPoltavets1   188
##  7 dhart2001         167
##  8 LateNighter5      160
##  9 Alexandera000     156
## 10 _Matheuu_         153
## 11 TicheyPamela      150
## 12 tinfoilted1       146
## 13 NilAndNull        132
## 14 Vadim56691447     123
## 15 Julli_a_          119
## 16 Bojagora          104
## 17 inversedotcom     104
## 18 Chris__Iverson    103
## 19 Intrepid_2011     103</code></pre>
<p><strong>Evaluation:</strong> The five most active Twitter accounts are
DaveClubMember1, common_sense54, EdCutter1, Seyahsm2, and BaloIreen.
Let’s also add the less active LateNighter5 for the purpose of practice.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="tidy-text-analysis.html#cb240-1" aria-hidden="true" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb240-2"><a href="tidy-text-analysis.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;DaveClubMember1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;Seyahsm2&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all users that are not the most prominent users</span></span>
<span id="cb240-3"><a href="tidy-text-analysis.html#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(user, word, <span class="at">sort =</span> <span class="cn">TRUE</span>)  <span class="co"># sorts the word, i.e., the most common words are displayed first</span></span>
<span id="cb240-4"><a href="tidy-text-analysis.html#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="tidy-text-analysis.html#cb240-5" aria-hidden="true" tabindex="-1"></a>frequency</span></code></pre></div>
<pre><code>## # A tibble: 139 × 3
##    user            word                n
##    &lt;chr&gt;           &lt;chr&gt;           &lt;int&gt;
##  1 DaveClubMember1 #prayforukrain     30
##  2 DaveClubMember1 #russiavsukrain    30
##  3 DaveClubMember1 #saveukrain        30
##  4 DaveClubMember1 #stopputin         30
##  5 DaveClubMember1 bio                30
##  6 DaveClubMember1 discord            30
##  7 DaveClubMember1 horribl            30
##  8 DaveClubMember1 imag               30
##  9 DaveClubMember1 join               30
## 10 DaveClubMember1 peopl              30
## # … with 129 more rows</code></pre>
<p><strong>Evaluation:</strong> This is insightful. As we can see, the <em>PorterStemmer</em>
treats <code>ukranian</code> and <code>ukrain</code>, <code>american</code> and <code>america</code>, as well as
<code>russian</code> and <code>russia</code> as separate words. Since the part of speech
(adjective or noun) is not particularly relevant for our analyses, we
should merge the terms to focus on more meaningful TopWords. In
addition, treating #ukrain and ukrain as separate words might not be
hlpful.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="tidy-text-analysis.html#cb242-1" aria-hidden="true" tabindex="-1"></a>data_tknzd<span class="sc">$</span>word <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(data_tknzd<span class="sc">$</span>word, <span class="fu">c</span>(<span class="st">&quot;russian&quot;</span> <span class="ot">=</span> <span class="st">&quot;russia&quot;</span>, <span class="st">&quot;ukrainian&quot;</span> <span class="ot">=</span> <span class="st">&quot;ukrain&quot;</span>, <span class="st">&quot;american&quot;</span> <span class="ot">=</span> <span class="st">&quot;america&quot;</span>, <span class="st">&quot;#ukrain&quot;</span> <span class="ot">=</span> <span class="st">&quot;ukrain&quot;</span>, <span class="st">&quot;#russia&quot;</span> <span class="ot">=</span> <span class="st">&quot;russia&quot;</span>))</span>
<span id="cb242-2"><a href="tidy-text-analysis.html#cb242-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-3"><a href="tidy-text-analysis.html#cb242-3" aria-hidden="true" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb242-4"><a href="tidy-text-analysis.html#cb242-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;DaveClubMember1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;Seyahsm2&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all users that are not the most prominent users</span></span>
<span id="cb242-5"><a href="tidy-text-analysis.html#cb242-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(user, word, <span class="at">sort =</span> <span class="cn">TRUE</span>)  <span class="co"># sorts the word, i.e., the most common words are displayed first</span></span>
<span id="cb242-6"><a href="tidy-text-analysis.html#cb242-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-7"><a href="tidy-text-analysis.html#cb242-7" aria-hidden="true" tabindex="-1"></a>frequency</span></code></pre></div>
<pre><code>## # A tibble: 135 × 3
##    user            word               n
##    &lt;chr&gt;           &lt;chr&gt;          &lt;int&gt;
##  1 Seyahsm2        america           32
##  2 DaveClubMember1 #prayforukrain    30
##  3 DaveClubMember1 #saveukrain       30
##  4 DaveClubMember1 #stopputin        30
##  5 DaveClubMember1 bio               30
##  6 DaveClubMember1 discord           30
##  7 DaveClubMember1 horribl           30
##  8 DaveClubMember1 imag              30
##  9 DaveClubMember1 join              30
## 10 DaveClubMember1 peopl             30
## # … with 125 more rows</code></pre>
<p>Next, we would like now the relative word frequencies. Some twitter
users might have posted a lot, while others have written little, but
used some meaningful words (e.g. “aggression”) excessively. We want to
know the share of these meaningful words as compared to the absolute
number of words posted by the respective user.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="tidy-text-analysis.html#cb244-1" aria-hidden="true" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> frequency <span class="sc">%&gt;%</span> </span>
<span id="cb244-2"><a href="tidy-text-analysis.html#cb244-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_tknzd <span class="sc">%&gt;%</span> </span>
<span id="cb244-3"><a href="tidy-text-analysis.html#cb244-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">count</span>(user, <span class="at">name =</span> <span class="st">&quot;total&quot;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># total = how many words has that particular user used in total?</span></span>
<span id="cb244-4"><a href="tidy-text-analysis.html#cb244-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">freq =</span> ((n<span class="sc">/</span>total)<span class="sc">*</span><span class="dv">100</span>)) <span class="co"># freq = relative frequency of the respective word compared to the total number of words that the user has used</span></span>
<span id="cb244-5"><a href="tidy-text-analysis.html#cb244-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-6"><a href="tidy-text-analysis.html#cb244-6" aria-hidden="true" tabindex="-1"></a>frequency</span></code></pre></div>
<pre><code>## # A tibble: 135 × 5
##    user            word               n total  freq
##    &lt;chr&gt;           &lt;chr&gt;          &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1 Seyahsm2        america           32   324  9.88
##  2 DaveClubMember1 #prayforukrain    30   570  5.26
##  3 DaveClubMember1 #saveukrain       30   570  5.26
##  4 DaveClubMember1 #stopputin        30   570  5.26
##  5 DaveClubMember1 bio               30   570  5.26
##  6 DaveClubMember1 discord           30   570  5.26
##  7 DaveClubMember1 horribl           30   570  5.26
##  8 DaveClubMember1 imag              30   570  5.26
##  9 DaveClubMember1 join              30   570  5.26
## 10 DaveClubMember1 peopl             30   570  5.26
## # … with 125 more rows</code></pre>
<p>Let’s make the user-specific word lists and their similarities /
differences a little easier to interpret:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="tidy-text-analysis.html#cb246-1" aria-hidden="true" tabindex="-1"></a>frequency <span class="sc">%&gt;%</span></span>
<span id="cb246-2"><a href="tidy-text-analysis.html#cb246-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb246-3"><a href="tidy-text-analysis.html#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user) <span class="sc">%&gt;%</span></span>
<span id="cb246-4"><a href="tidy-text-analysis.html#cb246-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb246-5"><a href="tidy-text-analysis.html#cb246-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb246-6"><a href="tidy-text-analysis.html#cb246-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(user, word) <span class="sc">%&gt;%</span></span>
<span id="cb246-7"><a href="tidy-text-analysis.html#cb246-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">terms =</span> <span class="fu">list</span>(word)) <span class="sc">%&gt;%</span></span>
<span id="cb246-8"><a href="tidy-text-analysis.html#cb246-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">terms =</span> <span class="fu">map</span>(terms, paste, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb246-9"><a href="tidy-text-analysis.html#cb246-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(terms)) <span class="sc">%&gt;%</span></span>
<span id="cb246-10"><a href="tidy-text-analysis.html#cb246-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
## # Groups:   user [6]
##   user            terms                                                         
##   &lt;chr&gt;           &lt;chr&gt;                                                         
## 1 BaloIreen       ukrain, russia, ban, directli, putin, sanction, shelter, sky,…
## 2 common_sense54  alli, biden, complet, cultiv, defens, democrat, explan, invas…
## 3 DaveClubMember1 #prayforukrain, #saveukrain, #stopputin, bio, discord, horrib…
## 4 EdCutter1       administr, afghan, amp, bail, biden, border, cashless, citi, …
## 5 LateNighter5    ukrain, bank, busi, call, classic, coup, democrat, die, fund,…
## 6 Seyahsm2        america, action, bold, border, hope, increas, invad, militari…</code></pre>
<p>You can even turn these user-specific word lists into a word cloud, if
you like these kind of visualizations:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="tidy-text-analysis.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First install the ggwordcloud package:</span></span>
<span id="cb248-2"><a href="tidy-text-analysis.html#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggwordcloud)) {</span>
<span id="cb248-3"><a href="tidy-text-analysis.html#cb248-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;ggwordcloud&quot;</span>); </span>
<span id="cb248-4"><a href="tidy-text-analysis.html#cb248-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(ggwordcloud)</span>
<span id="cb248-5"><a href="tidy-text-analysis.html#cb248-5" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load ggwordcloud</span></span>
<span id="cb248-6"><a href="tidy-text-analysis.html#cb248-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-7"><a href="tidy-text-analysis.html#cb248-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Then store your word lists into a source object</span></span>
<span id="cb248-8"><a href="tidy-text-analysis.html#cb248-8" aria-hidden="true" tabindex="-1"></a>wordcloud_data <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb248-9"><a href="tidy-text-analysis.html#cb248-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;DaveClubMember1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;Seyahsm2&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all users that are not the most prominent users</span></span>
<span id="cb248-10"><a href="tidy-text-analysis.html#cb248-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(user, word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb248-11"><a href="tidy-text-analysis.html#cb248-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the word cloud:</span></span>
<span id="cb248-12"><a href="tidy-text-analysis.html#cb248-12" aria-hidden="true" tabindex="-1"></a>wordcloud_data <span class="sc">%&gt;%</span></span>
<span id="cb248-13"><a href="tidy-text-analysis.html#cb248-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">label =</span> word, <span class="at">size =</span> n, <span class="at">color =</span> user)) <span class="sc">+</span> </span>
<span id="cb248-14"><a href="tidy-text-analysis.html#cb248-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud_area</span>(<span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb248-15"><a href="tidy-text-analysis.html#cb248-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb248-16"><a href="tidy-text-analysis.html#cb248-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#9FC6C0&quot;</span>,<span class="st">&quot;#89BFC1&quot;</span>,<span class="st">&quot;#67A9B6&quot;</span>,<span class="st">&quot;#5495AD&quot;</span>,<span class="st">&quot;#377099&quot;</span>,<span class="st">&quot;#08333F&quot;</span>)) <span class="sc">+</span></span>
<span id="cb248-17"><a href="tidy-text-analysis.html#cb248-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb248-18"><a href="tidy-text-analysis.html#cb248-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-147-1.png" width="672" /></p>
<p>Or this word cloud:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="tidy-text-analysis.html#cb249-1" aria-hidden="true" tabindex="-1"></a>wordcloud_data <span class="sc">%&gt;%</span></span>
<span id="cb249-2"><a href="tidy-text-analysis.html#cb249-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">label =</span> word, <span class="at">size =</span> n, <span class="at">color =</span> user)) <span class="sc">+</span> </span>
<span id="cb249-3"><a href="tidy-text-analysis.html#cb249-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud_area</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb249-4"><a href="tidy-text-analysis.html#cb249-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb249-5"><a href="tidy-text-analysis.html#cb249-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#9FC6C0&quot;</span>,<span class="st">&quot;#89BFC1&quot;</span>,<span class="st">&quot;#67A9B6&quot;</span>,<span class="st">&quot;#5495AD&quot;</span>,<span class="st">&quot;#377099&quot;</span>,<span class="st">&quot;#08333F&quot;</span>)) <span class="sc">+</span></span>
<span id="cb249-6"><a href="tidy-text-analysis.html#cb249-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb249-7"><a href="tidy-text-analysis.html#cb249-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>user)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-148-1.png" width="672" /></p>
<p><strong>Evaluation:</strong> Most of the Twitter accounts seem to be U.S. American.
However, they focus on different issues. (1) <em>BaloIreen</em> seems to demand
for economic actions against Russia, (2) <em>common_sense54</em> seems to focus
on a Presidential / democratic alliance against Russia and to take the
perspective of a military defender, (3) <em>DaveClubMember1</em> seems to ask
for civic aid and engagement, (4) <em>EdCutter1</em> seems to tweet about a mix
of issues covered by the user 4 users (economy, government action, war
crimes, etc.), (5) <em>LateNighter5</em> tweets could also be about businesses
and Republicans, and <em>Seyahsm2</em> focuses on NATO, its border control, and
hope.</p>
<div id="advanced-word-frequency-comparisons" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Advanced: Word frequency comparisons<a href="tidy-text-analysis.html#advanced-word-frequency-comparisons" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can plot the word frequencies against each other and get a real good
overview, we need to transform the data in a way that every user has
his/her own column with her/her word frequencies because we need to use
these frequencies on a y- and y-axis. Therefore, we’ll use the
<code>pivot_wider</code> function from the <code>tidyr</code> package that comes pre-installed
with the <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="tidy-text-analysis.html#cb250-1" aria-hidden="true" tabindex="-1"></a>frequency_wide <span class="ot">&lt;-</span> frequency <span class="sc">%&gt;%</span> </span>
<span id="cb250-2"><a href="tidy-text-analysis.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(user, word, freq) <span class="sc">%&gt;%</span> </span>
<span id="cb250-3"><a href="tidy-text-analysis.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> user, <span class="at">values_from =</span> freq)</span>
<span id="cb250-4"><a href="tidy-text-analysis.html#cb250-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-5"><a href="tidy-text-analysis.html#cb250-5" aria-hidden="true" tabindex="-1"></a>frequency_wide</span></code></pre></div>
<pre><code>## # A tibble: 111 × 7
##    word           Seyahsm2 DaveClubMember1 common_sense54 BaloIreen EdCutter1
##    &lt;chr&gt;             &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1 america            9.88           NA             NA           NA        NA
##  2 #prayforukrain    NA               5.26          NA           NA        NA
##  3 #saveukrain       NA               5.26          NA           NA        NA
##  4 #stopputin        NA               5.26          NA           NA        NA
##  5 bio               NA               5.26          NA           NA        NA
##  6 discord           NA               5.26          NA           NA        NA
##  7 horribl           NA               5.26          NA           NA        NA
##  8 imag              NA               5.26          NA           NA        NA
##  9 join              NA               5.26          NA           NA        NA
## 10 peopl             NA               5.26           4.70        NA        NA
## # … with 101 more rows, and 1 more variable: LateNighter5 &lt;dbl&gt;</code></pre>
<p>Now, let’s investigate which words are typical for <em>DaveClubMember1</em>
compared to <em>common_sense54</em>.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="tidy-text-analysis.html#cb252-1" aria-hidden="true" tabindex="-1"></a>frequency_wide <span class="sc">%&gt;%</span></span>
<span id="cb252-2"><a href="tidy-text-analysis.html#cb252-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(DaveClubMember1)) <span class="sc">%&gt;%</span> <span class="co"># keep only words that are being used by both Twitter accounts</span></span>
<span id="cb252-3"><a href="tidy-text-analysis.html#cb252-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(common_sense54)) <span class="sc">%&gt;%</span> </span>
<span id="cb252-4"><a href="tidy-text-analysis.html#cb252-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>DaveClubMember1, <span class="at">y=</span>common_sense54, <span class="at">label=</span>word)) <span class="sc">+</span></span>
<span id="cb252-5"><a href="tidy-text-analysis.html#cb252-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_point(alpha = 0.2, size = 4, position=position_jitter(h=0.15,w=0.15)) +</span></span>
<span id="cb252-6"><a href="tidy-text-analysis.html#cb252-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust=</span><span class="dv">0</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">position=</span><span class="fu">position_jitter</span>(<span class="at">h=</span><span class="fl">0.25</span>,<span class="at">w=</span><span class="fl">0.25</span>), <span class="at">size=</span><span class="fl">3.0</span>) <span class="sc">+</span></span>
<span id="cb252-7"><a href="tidy-text-analysis.html#cb252-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fl">4.5</span>,<span class="fl">6.0</span>) <span class="sc">+</span></span>
<span id="cb252-8"><a href="tidy-text-analysis.html#cb252-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fl">4.5</span>,<span class="fl">6.0</span>) <span class="sc">+</span></span>
<span id="cb252-9"><a href="tidy-text-analysis.html#cb252-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">color =</span> <span class="st">&quot;#67A9B6&quot;</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-150-1.png" width="672" /></p>
<p><strong>Evaluation:</strong> Both accounts have mentioned all of the words in this
plot at least once in their tweets. Words along the blue line are used
approximately equally by both accounts, while words further away from
the line are used significantly more frequently by one account than the
other. Here, all terms are more characteristic of <em>DaveClubMember1</em> than
of <em>common_sense54</em> because they are beneath the blue line.</p>
</div>
<div id="advanced-word-log-odds" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Advanced: Word log odds<a href="tidy-text-analysis.html#advanced-word-log-odds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far, we’ve looked at how often a word is used compared to all the
other words an account has posted (<em>absolute &amp; relative frequencies</em>).
Next, we’ll look at how probable it is that a word was posted by a
certain account (<em>log odds</em>). There is only one problem: measurement
error. Probabilities are more accurate for words that are used
frequently and less accurate for words that have been measured only a
few times. A way to correct this measurement error is to use the
<code>tidylo</code> package that creates weighted, i.e. corrected, log odds ratio
based on an approach proposed by <a href="https://www.cambridge.org/core/journals/political-analysis/article/fightin-words-lexical-feature-selection-and-evaluation-for-identifying-the-content-of-political-conflict/81B3703230D21620B81EB6E2266C7A66">Monroe, Colaresi, and Quinn
(2008)</a>.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="tidy-text-analysis.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install / load the tidy log odds package to create weighted log odds</span></span>
<span id="cb253-2"><a href="tidy-text-analysis.html#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidylo)) {</span>
<span id="cb253-3"><a href="tidy-text-analysis.html#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;tidylo&quot;</span>); </span>
<span id="cb253-4"><a href="tidy-text-analysis.html#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(tidylo)</span>
<span id="cb253-5"><a href="tidy-text-analysis.html#cb253-5" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load tidylo</span></span>
<span id="cb253-6"><a href="tidy-text-analysis.html#cb253-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-7"><a href="tidy-text-analysis.html#cb253-7" aria-hidden="true" tabindex="-1"></a>word_lo <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb253-8"><a href="tidy-text-analysis.html#cb253-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;DaveClubMember1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;Seyahsm2&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all users that are not the most prominent users</span></span>
<span id="cb253-9"><a href="tidy-text-analysis.html#cb253-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(user, word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb253-10"><a href="tidy-text-analysis.html#cb253-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_log_odds</span>(user, word, n, <span class="at">unweighted =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb253-11"><a href="tidy-text-analysis.html#cb253-11" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(prblty = (plogis(log_odds)*100)) %&gt;%</span></span>
<span id="cb253-12"><a href="tidy-text-analysis.html#cb253-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(log_odds_weighted))</span>
<span id="cb253-13"><a href="tidy-text-analysis.html#cb253-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-14"><a href="tidy-text-analysis.html#cb253-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_lo)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   user            word               n log_odds log_odds_weighted
##   &lt;chr&gt;           &lt;chr&gt;          &lt;int&gt;    &lt;dbl&gt;             &lt;dbl&gt;
## 1 Seyahsm2        america           32     2.00             11.3 
## 2 BaloIreen       putin             10     1.49              8.49
## 3 DaveClubMember1 #prayforukrain    30     1.52              8.34
## 4 DaveClubMember1 #saveukrain       30     1.52              8.34
## 5 DaveClubMember1 #stopputin        30     1.52              8.34
## 6 DaveClubMember1 bio               30     1.52              8.34</code></pre>
<p>Log odds ratio express the likelihood that a word comes from a certain
account, compared to all other accounts. As a result, the highest log
odds indicate words that are extremely distinctive for an account. Using
a table, let’s compare the weighted log odds for some words across
accounts.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="tidy-text-analysis.html#cb255-1" aria-hidden="true" tabindex="-1"></a>word_lo2 <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb255-2"><a href="tidy-text-analysis.html#cb255-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;DaveClubMember1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;Seyahsm2&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all users that are not the most prominent users</span></span>
<span id="cb255-3"><a href="tidy-text-analysis.html#cb255-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(user, word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb255-4"><a href="tidy-text-analysis.html#cb255-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_log_odds</span>(user, word, n) <span class="sc">%&gt;%</span></span>
<span id="cb255-5"><a href="tidy-text-analysis.html#cb255-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span> </span>
<span id="cb255-6"><a href="tidy-text-analysis.html#cb255-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(user, log_odds_weighted, <span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb255-7"><a href="tidy-text-analysis.html#cb255-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-8"><a href="tidy-text-analysis.html#cb255-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_lo2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   word  BaloIreen common_sense54 DaveClubMember1 EdCutter1 LateNighter5 Seyahsm2
##   &lt;chr&gt;     &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;
## 1 #ban…      2.29           0               0            0            0     0   
## 2 #pra…      0              0               8.34         0            0     0   
## 3 #sav…      0              0               8.34         0            0     0   
## 4 #sto…      0              0               8.34         0            0     0   
## 5 @fox…      0              2.53            0            0            0     0   
## 6 @gop       0              0               0            0            0     1.94</code></pre>
<p>To get a better overview, let’s create a visualization of the 10 most
distinctive words per account.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="tidy-text-analysis.html#cb257-1" aria-hidden="true" tabindex="-1"></a>word_lo <span class="sc">%&gt;%</span></span>
<span id="cb257-2"><a href="tidy-text-analysis.html#cb257-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user) <span class="sc">%&gt;%</span></span>
<span id="cb257-3"><a href="tidy-text-analysis.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(log_odds_weighted)) <span class="sc">%&gt;%</span></span>
<span id="cb257-4"><a href="tidy-text-analysis.html#cb257-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb257-5"><a href="tidy-text-analysis.html#cb257-5" aria-hidden="true" tabindex="-1"></a>  ungroup <span class="sc">%&gt;%</span></span>
<span id="cb257-6"><a href="tidy-text-analysis.html#cb257-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, log_odds_weighted)) <span class="sc">%&gt;%</span></span>
<span id="cb257-7"><a href="tidy-text-analysis.html#cb257-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(word, log_odds_weighted, <span class="at">fill =</span> user)) <span class="sc">+</span></span>
<span id="cb257-8"><a href="tidy-text-analysis.html#cb257-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb257-9"><a href="tidy-text-analysis.html#cb257-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#9FC6C0&quot;</span>,<span class="st">&quot;#89BFC1&quot;</span>,<span class="st">&quot;#67A9B6&quot;</span>,<span class="st">&quot;#5495AD&quot;</span>,<span class="st">&quot;#377099&quot;</span>,<span class="st">&quot;#08333F&quot;</span>)) <span class="sc">+</span></span>
<span id="cb257-10"><a href="tidy-text-analysis.html#cb257-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>user, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb257-11"><a href="tidy-text-analysis.html#cb257-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb257-12"><a href="tidy-text-analysis.html#cb257-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Log Odds Ratio&quot;</span>, <span class="at">x=</span><span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-153-1.png" width="672" /></p>
</div>
</div>
<div id="topic-modeling" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Topic modeling<a href="tidy-text-analysis.html#topic-modeling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section, we’ll use a combination of the <code>tidytext</code> package, the
<code>quanteda</code> package, and the <code>topicmodels</code> package to create topic models
with <em>Latent Dirichlet allocation</em> (<em>LDA</em>), one of the most prevalent
topic modeling algorithms. LDA creates <em>mixed-membership models</em>, i.e.,
LDA assumes that every text contains a mix of different topics, e.g. a
tweet can be 60% about TopicA (War crimes) and 40% about TopicB (Housing
of refugees). Topics are defined by the mix of words that are associated
with them. For example, the most common words in TopicA (War crimes) can
be “massacre”, “soldiers”, and “brutal”. The most common words in TopicB
(Housing of refugees) can be “volunteers”, “shelter”, and “children”.
However, both topics can be mentioned in one single text, e.g., tweets
about the brutal war crimes of Russian soldiers that force Ukrainian
refugees to take their children and seek shelter in neighboring
countries. LDA estimates the most common words in a topic and the most
common topics in a text simultaneously.</p>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><em>Image: Assigning topics to a document (<a href="https://sicss.io/2019/materials/day3-text-analysis/topic-modeling/rmarkdown/Topic_Modeling.html">Screenshot from: Chris Bail)</a>:</em></td>
</tr>
<tr class="even">
<td><img src="images/Tut_topic_modeling.JPG" /></td>
</tr>
</tbody>
</table>
<p><strong>Important hint:</strong> Both the <code>quanteda</code>and the <code>topicmodels</code> package use
machine learning lingo. That is, words are called <em>features</em> and
texts/tweets are called <em>documents</em>. The total sum of all documents is
called a <em>corpus</em>. In the long run, you should get used to this lingo,
so we will keep using it in this tutorial, too.</p>
<div id="first-steps" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> First steps<a href="tidy-text-analysis.html#first-steps" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you haven’t already, please install / load the <code>quanteda</code> and
<code>topicmodels</code> packages:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="tidy-text-analysis.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install / load the quanteda package for data transformation</span></span>
<span id="cb258-2"><a href="tidy-text-analysis.html#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(quanteda)) {</span>
<span id="cb258-3"><a href="tidy-text-analysis.html#cb258-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;quanteda&quot;</span>); </span>
<span id="cb258-4"><a href="tidy-text-analysis.html#cb258-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(quanteda)</span>
<span id="cb258-5"><a href="tidy-text-analysis.html#cb258-5" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load quanteda</span></span>
<span id="cb258-6"><a href="tidy-text-analysis.html#cb258-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-7"><a href="tidy-text-analysis.html#cb258-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Install / load the topicmodels package for topic modeling</span></span>
<span id="cb258-8"><a href="tidy-text-analysis.html#cb258-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(topicmodels)) {</span>
<span id="cb258-9"><a href="tidy-text-analysis.html#cb258-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;topicmodels&quot;</span>); </span>
<span id="cb258-10"><a href="tidy-text-analysis.html#cb258-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(topicmodels)</span>
<span id="cb258-11"><a href="tidy-text-analysis.html#cb258-11" aria-hidden="true" tabindex="-1"></a>} <span class="co">#load / install+load topicmodels</span></span></code></pre></div>
<p>Next, using the <code>tidytext</code> package, we will convert our tidy text data
into a document-feature matrix (<em>dfm</em>) that the <code>topicmodels</code> package
can understand and do calculations with. In a dfm…</p>
<ol style="list-style-type: decimal">
<li>…rows represent the documents (= texts),</li>
<li>…columns represent features (= unique words),</li>
<li>…the cells represent the frequency with which a feature appears in
a specific document.</li>
</ol>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="tidy-text-analysis.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cast the tidy text data into a matrix (dfm) that topicmodels can use for calculation:</span></span>
<span id="cb259-2"><a href="tidy-text-analysis.html#cb259-2" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb259-3"><a href="tidy-text-analysis.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tweet, text, word) <span class="sc">%&gt;%</span></span>
<span id="cb259-4"><a href="tidy-text-analysis.html#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(tweet, word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb259-5"><a href="tidy-text-analysis.html#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cast_dfm</span>(tweet, word, n)</span>
<span id="cb259-6"><a href="tidy-text-analysis.html#cb259-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-7"><a href="tidy-text-analysis.html#cb259-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dfm)</span></code></pre></div>
<pre><code>## Document-feature matrix of: 6 documents, 1,718 features (99.18% sparse) and 0 docvars.
##       features
## docs   ukrain russia america russiaukrain @eucommiss @vonderleyen attack eu
##   231       3      1       0            0          0            0      0  0
##   246       3      0       0            0          0            0      0  0
##   614       3      1       0            0          0            0      0  0
##   4485      1      3       0            0          0            0      0  0
##   4527      2      3       0            0          0            0      0  0
##   5431      3      1       0            0          0            0      0  0
##       features
## docs   europ fellow
##   231      0      0
##   246      0      0
##   614      0      0
##   4485     0      0
##   4527     0      0
##   5431     0      0
## [ reached max_nfeat ... 1,708 more features ]</code></pre>
<p>Let’s check out the dimensions of this new document-feature matrix:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="tidy-text-analysis.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;We are investigating &quot;</span>, <span class="fu">dim</span>(dfm)[<span class="dv">1</span>], <span class="st">&quot; documents (tweets) and &quot;</span>, <span class="fu">dim</span>(dfm)[<span class="dv">2</span>], <span class="st">&quot; features (unique words).&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;We are investigating  9646  documents (tweets) and  1718  features (unique words).&quot;</code></pre>
<p>And let’s have a look at our top features:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="tidy-text-analysis.html#cb263-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">topfeatures</span>(dfm, <span class="dv">10</span>) <span class="co"># this is a neat function from quanteda to investigate the top features in a dfm</span></span></code></pre></div>
<pre><code>##  ukrain  russia   putin   peopl     war    nato   invas countri support   world 
##    9561    3777    1478    1114    1092     829     692     656     623     579</code></pre>
</div>
<div id="model-estimation-number-of-topics" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Model estimation: Number of topics<a href="tidy-text-analysis.html#model-estimation-number-of-topics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As a researcher, you must first estimate the number of topics you
anticipate to encounter across all documents (= the number of topics <em>K</em>
in a corpus) before fitting an LDA model. If you estimate there are
approximately 20 topics that Twitter accounts, for example, you’ll set
<em>K</em> = 20 to extract 20 separate topics. The 20 topics are then extracted
from the corpus based on the distribution of co-occurring words in each
document. Choosing a good value for <em>K</em> is extremely important and
consequential, since it will impact your results. Usually, small <em>K</em>s
produce very distinct, but generalizable topics, while high <em>K</em>s produce
overlapping themes, but are also more event- and issue-specific.</p>
<p>Let’s create a topic model. More specifically, let’s create a six-topic
LDA model using <code>topicmodels</code>. In practice, you would often use a higher
<em>K</em>, but for our use case, three should suffice.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="tidy-text-analysis.html#cb265-1" aria-hidden="true" tabindex="-1"></a>lda <span class="ot">&lt;-</span> <span class="fu">LDA</span>(dfm, <span class="at">k =</span> <span class="dv">3</span>, <span class="at">control =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">123</span>)) <span class="co"># the control argument uses a random number (123) to seed the assignment of topics to each word in the corpus (this helps to create reproducability in an otherwise random process!)</span></span></code></pre></div>
</div>
<div id="practice-model-estimation" class="section level3 unnumbered hasAnchor">
<h3>Practice: Model estimation<a href="tidy-text-analysis.html#practice-model-estimation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(Install +) Load the <code>topicmodels</code> package. Next, cast the tidy text
data <em>data_tknzd</em> into a <em>dfm</em> that the <code>topicmodels</code> can use to
calculate topic models. Finally, estimate an LDA-based topic model with
3 topics.</p>
</div>
<div id="inspect-the-topics" class="section level3 hasAnchor" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Inspect the topics<a href="tidy-text-analysis.html#inspect-the-topics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="word-topic-probabilities" class="section level4 hasAnchor" number="7.4.3.1">
<h4><span class="header-section-number">7.4.3.1</span> Word-topic probabilities<a href="tidy-text-analysis.html#word-topic-probabilities" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To inspect the topics with the <code>tidytext</code> package, we need to tidy up
our LDA model first, i.e., bring it back into a data format that works
for tidy text analysis.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="tidy-text-analysis.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># turn the lda model back into a tidy data frame:</span></span>
<span id="cb266-2"><a href="tidy-text-analysis.html#cb266-2" aria-hidden="true" tabindex="-1"></a>tidy_lda <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lda, <span class="at">matrix =</span> <span class="st">&quot;beta&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># matrix = &quot;beta&quot; creates the word-topic probabilities</span></span>
<span id="cb266-3"><a href="tidy-text-analysis.html#cb266-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">word =</span> term)</span>
<span id="cb266-4"><a href="tidy-text-analysis.html#cb266-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb266-5"><a href="tidy-text-analysis.html#cb266-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tidy_lda)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   topic word      beta
##   &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1     1 ukrain 0.152  
## 2     2 ukrain 0.148  
## 3     3 ukrain 0.0419 
## 4     1 russia 0.00401
## 5     2 russia 0.111  
## 6     3 russia 0.0200</code></pre>
<p>The new column, β (“beta”), shows the per-topic-per-word probabilities,
i.e., the probability that the respective feature / word is being
generated from the topic under examination. To put it another way, it’s
the <strong>probability that a feature is common in a certain topic</strong>. The
<strong>word-topic matrix</strong> is often used to analyze and label topics (i.e.,
using the features with the highest conditional probability for that
topic). In summary, the word-topic matrix aids in the creation of
topic-specific word lists.</p>
<p>Let’s create a visualization of the 10 terms that are most common within
each topic.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="tidy-text-analysis.html#cb268-1" aria-hidden="true" tabindex="-1"></a>tidy_lda <span class="sc">%&gt;%</span></span>
<span id="cb268-2"><a href="tidy-text-analysis.html#cb268-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb268-3"><a href="tidy-text-analysis.html#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(beta)) <span class="sc">%&gt;%</span></span>
<span id="cb268-4"><a href="tidy-text-analysis.html#cb268-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb268-5"><a href="tidy-text-analysis.html#cb268-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb268-6"><a href="tidy-text-analysis.html#cb268-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(word, beta), <span class="at">y=</span>beta, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb268-7"><a href="tidy-text-analysis.html#cb268-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb268-8"><a href="tidy-text-analysis.html#cb268-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#9FC6C0&quot;</span>,<span class="st">&quot;#5495AD&quot;</span>,<span class="st">&quot;#08333F&quot;</span>)) <span class="sc">+</span></span>
<span id="cb268-9"><a href="tidy-text-analysis.html#cb268-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb268-10"><a href="tidy-text-analysis.html#cb268-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>topic, <span class="at">scales=</span><span class="st">&quot;free&quot;</span>, <span class="at">labeller =</span> <span class="fu">as_labeller</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Topic 1&quot;</span>, <span class="st">`</span><span class="at">2</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Topic 2&quot;</span>, <span class="st">`</span><span class="at">3</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Topic 3&quot;</span>))) <span class="sc">+</span></span>
<span id="cb268-11"><a href="tidy-text-analysis.html#cb268-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;word&quot;</span>) <span class="sc">+</span></span>
<span id="cb268-12"><a href="tidy-text-analysis.html#cb268-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-160-1.png" width="672" /></p>
<p>As we can see, the topics are note really exclusive, i.e., have a lot of
overlaps. This is a sign that we (a) need more preprocessing / text
normalization and (b) need to adjust the number of <em>K</em> topics. However,
topic modeling is usually more difficult for tweets than for news texts,
so it’s unclear whether we’ll be able to significantly enhance the
results anyway.</p>
<ol style="list-style-type: decimal">
<li><strong>Topic 1</strong>: May have the focus on a possible world war III or on the fact that the whole world should support Ukraine, but maybe not in a militaristic way because there are no words like “forces”, “troops” or “military” present. Maybe it focuses on both (an indicator that we need more topics than three)? Interestingly, this topic does not include “Russia” as a feature, so maybe it’s not about WWIII?</li>
<li><strong>Topic 2</strong>: This topic is directed at the NATO / U.S. America to end the conflict between Ukraine and Russia. Here, Russia is a prominent feature!</li>
<li><strong>Topic 3</strong>: This topic is hard to interpret, but it seems to be directed at U.S. president Joe Biden and asks for timely intervention? Amp could refer to Ukrainian war amps, i.e., soldiers who had to get body party amputated. So maybe this topic is about consequences for the life of Ukranians / Ukranian citizens?</li>
</ol>
<p>Now that we have a first impression about what the topics are dealing with, let’s take a look
at the less frequent terms in each topic to check if our interpretation
of the topics remains logical. Let’s have a look at the issues without
the “top performers” <code>ukrain</code>, <code>russia</code>, and <code>putin</code> and look at the
topics again.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="tidy-text-analysis.html#cb269-1" aria-hidden="true" tabindex="-1"></a>tidy_lda <span class="sc">%&gt;%</span></span>
<span id="cb269-2"><a href="tidy-text-analysis.html#cb269-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word<span class="sc">!=</span><span class="st">&quot;putin&quot;</span>, word<span class="sc">!=</span><span class="st">&quot;ukrain&quot;</span>,  word<span class="sc">!=</span><span class="st">&quot;russia&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb269-3"><a href="tidy-text-analysis.html#cb269-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb269-4"><a href="tidy-text-analysis.html#cb269-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(beta)) <span class="sc">%&gt;%</span></span>
<span id="cb269-5"><a href="tidy-text-analysis.html#cb269-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb269-6"><a href="tidy-text-analysis.html#cb269-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb269-7"><a href="tidy-text-analysis.html#cb269-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(word, beta), <span class="at">y=</span>beta, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb269-8"><a href="tidy-text-analysis.html#cb269-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb269-9"><a href="tidy-text-analysis.html#cb269-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#9FC6C0&quot;</span>,<span class="st">&quot;#5495AD&quot;</span>,<span class="st">&quot;#08333F&quot;</span>)) <span class="sc">+</span></span>
<span id="cb269-10"><a href="tidy-text-analysis.html#cb269-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.07</span>) <span class="sc">+</span></span>
<span id="cb269-11"><a href="tidy-text-analysis.html#cb269-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>topic, <span class="at">scales=</span><span class="st">&quot;free&quot;</span>, <span class="at">labeller =</span> <span class="fu">as_labeller</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Topic 1&quot;</span>, <span class="st">`</span><span class="at">2</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Topic 2&quot;</span>, <span class="st">`</span><span class="at">3</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Topic 3&quot;</span>))) <span class="sc">+</span></span>
<span id="cb269-12"><a href="tidy-text-analysis.html#cb269-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;word&quot;</span>) <span class="sc">+</span></span>
<span id="cb269-13"><a href="tidy-text-analysis.html#cb269-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-161-1.png" width="672" /></p>
<p>Excluding these top performers gives away more information. We might read the topics somewhat like this:</p>
<ol style="list-style-type: decimal">
<li><strong>Topic 1</strong>: The focus seems to be on war escalation (pro war). Here, tweets propose that the world (not U.S. America / NATO!) should join the fight?</li>
<li><strong>Topic 2</strong>: May have the focus on war deescalation (anti war). Here, tweets propose that U.S. America / NATO should stop the war?</li>
<li><strong>Topic 3</strong>: Maybe this topic has a focus on European border control that President Biden should provide? Still hard to interpret.</li>
</ol>
<p>Despite the fact that the topics are not mutually exclusive, they appear
to be a reasonable approximation of a first tweet categorization (e.g., pro / anti war). The
accuracy of this categorization must be confirmed, particularly by
extensive / deep reading. Remember that topics are only suggestions that
should be complemented with more sophisticated (often: qualitative)
techniques.</p>
<p>The high level of overlap across topics might possibly be attributed to
the fact that the data set includes tweets from extremely comparable
situations. All tweets were created on February 25 (the first day
following the outbreak of Russian aggression against Ukraine) between
18:00 and 18:10 Paris time, i.e., all Tweets are, thematically speaking,
about the Russian invasion of Ukraine. Naturally, the subjects of these
tweets are fairly similar, which is to be anticipated in these
circumstances.</p>
<p>Thus, the three emerging topics serve (a little bit!) as frames of the
same event since the conditions of their origin are so similar (namely
the outbreak of Russian aggression). <strong>When understanding topics as
frames, however, one should not go overboard (remember, e.g., that we
are investigating multi-membership models)!</strong> See <a href="https://www.tandfonline.com/doi/full/10.1080/10584609.2020.1812777">Nicholls &amp; Culpepper
(2020)</a>
for a full explanation of why topics and frames are not the same thing,
i.e., why topic modeling should not be used for framing analysis.</p>
</div>
<div id="practice-word-topic-probabilities" class="section level4 unnumbered hasAnchor">
<h4>Practice: Word-topic probabilities<a href="tidy-text-analysis.html#practice-word-topic-probabilities" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now it’s your turn. Inspect the word-topic probabilities of the topics
in the Kliemann data. To this end cast your <em>lda</em> model back into the
tidy text format while calculating the beta values.</p>
<p>After that, try to visualize your tidy data.</p>
<p>Finally, evaluate the topic model that you see. What are the topics
about? Are there any words that you would like to add to the stop word
list, i.e., that you would like to exclude when rerunning the LDA
analysis to produce better results?</p>
</div>
<div id="document-topic-probabilities" class="section level4 hasAnchor" number="7.4.3.2">
<h4><span class="header-section-number">7.4.3.2</span> Document-topic probabilities<a href="tidy-text-analysis.html#document-topic-probabilities" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now that we know which words are associated with what topics, we also
want to know what documents (i.e., tweets) are associated with what
topics.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="tidy-text-analysis.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># again, turn the lda model back into a tidy data frame:</span></span>
<span id="cb270-2"><a href="tidy-text-analysis.html#cb270-2" aria-hidden="true" tabindex="-1"></a>tidy_lda2 <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lda, <span class="at">matrix =</span> <span class="st">&quot;gamma&quot;</span>) <span class="co"># matrix = &quot;gamma&quot; creates the document-topic probabilities</span></span>
<span id="cb270-3"><a href="tidy-text-analysis.html#cb270-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb270-4"><a href="tidy-text-analysis.html#cb270-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tidy_lda2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   document topic gamma
##   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
## 1 231          1 0.340
## 2 246          1 0.352
## 3 614          1 0.331
## 4 4485         1 0.320
## 5 4527         1 0.327
## 6 5431         1 0.327</code></pre>
<p>The new column, γ (“gamma”), shows the per-document-per-topic
probabilities, i.e., the proportion of words from that document that are
generated from the topic under examination. To put it another way, it’s
the <strong>probability that a topic is common in a certain document</strong>. The
<strong>document-topic matrix</strong> is used to identify the top documents of a
topic (i.e., using the documents with the highest probability for that
topic) and to assign main topics to documents In summary, the word-topic
matrix aids in the creation of document-specific topic lists.</p>
<p>Let’s investigate which documents have the highest probability for Topic
2, the topic that seems to focus on war deescalation, i.e. stopping the fights.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="tidy-text-analysis.html#cb272-1" aria-hidden="true" tabindex="-1"></a>tidy_lda2 <span class="sc">%&gt;%</span></span>
<span id="cb272-2"><a href="tidy-text-analysis.html#cb272-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb272-3"><a href="tidy-text-analysis.html#cb272-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gamma))</span></code></pre></div>
<pre><code>## # A tibble: 9,646 × 3
##    document topic gamma
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
##  1 9491         2 0.362
##  2 31167        2 0.360
##  3 37585        2 0.356
##  4 36003        2 0.355
##  5 45323        2 0.355
##  6 4485         2 0.355
##  7 18132        2 0.354
##  8 12354        2 0.354
##  9 33538        2 0.353
## 10 26827        2 0.353
## # … with 9,636 more rows</code></pre>
<p><strong>Evaluation:</strong> 36.2% of document 9491, i.e. tweet No. 9491, are
related to Topic2. This is also true for tweet No. 31167.</p>
<p>Let’s have a look at both tweets and evaluate their word choice and full
tweet text.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="tidy-text-analysis.html#cb274-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb274-2"><a href="tidy-text-analysis.html#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tweet, text, word) <span class="sc">%&gt;%</span> </span>
<span id="cb274-3"><a href="tidy-text-analysis.html#cb274-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tweet <span class="sc">==</span> <span class="dv">9491</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb274-4"><a href="tidy-text-analysis.html#cb274-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">1</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb274-5"><a href="tidy-text-analysis.html#cb274-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;Russia expects India to support it at the UNSC,when a resolution opposing the military Russian operation against Ukraine comes up for a vote on Friday evening (IST 1:30am saturday)- Babushkin Senior most Russian Diplomat in New Delhi \n\nIndian caught between devildeep blue sea&quot;</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="tidy-text-analysis.html#cb276-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb276-2"><a href="tidy-text-analysis.html#cb276-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tweet, text, word) <span class="sc">%&gt;%</span> </span>
<span id="cb276-3"><a href="tidy-text-analysis.html#cb276-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tweet <span class="sc">==</span> <span class="dv">31167</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb276-4"><a href="tidy-text-analysis.html#cb276-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">1</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb276-5"><a href="tidy-text-analysis.html#cb276-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;@mfa_russia @NATO @RussianEmbFinla @Finland_OSCE @GenConFinSPb @Ulkoministerio @EmbFinMoscow @RusEmbNo @natomission_ru @USNATO @StateDept Let’s see, NATO hasn’t invaded anyone to force it to join while Russia has invaded Ukraine to force them to be friendly to Russia. Damn NATO sure is a threat to Russian security.&quot;</code></pre>
<p>Interesting! Both tweets are about diplomatic (instead of military) actions, i.e. which countries are in support of the Ukraine joining NATO and of the sovereignty of Ukraine. Of course, we should check more tweets to validate this, but it’s a good start.</p>
<p>For comparison, let’s also look at documents that score high on Topic 1.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="tidy-text-analysis.html#cb278-1" aria-hidden="true" tabindex="-1"></a>tidy_lda2 <span class="sc">%&gt;%</span></span>
<span id="cb278-2"><a href="tidy-text-analysis.html#cb278-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb278-3"><a href="tidy-text-analysis.html#cb278-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gamma))</span></code></pre></div>
<pre><code>## # A tibble: 9,646 × 3
##    document topic gamma
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
##  1 7805         1 0.356
##  2 12781        1 0.355
##  3 40030        1 0.354
##  4 23553        1 0.354
##  5 11080        1 0.353
##  6 1551         1 0.353
##  7 33308        1 0.353
##  8 40417        1 0.353
##  9 46920        1 0.353
## 10 51830        1 0.353
## # … with 9,636 more rows</code></pre>
<p>Both tweet No. 7805 and No. 37798 have a high share of topic 1.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="tidy-text-analysis.html#cb280-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb280-2"><a href="tidy-text-analysis.html#cb280-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tweet, text, word) <span class="sc">%&gt;%</span> </span>
<span id="cb280-3"><a href="tidy-text-analysis.html#cb280-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tweet <span class="sc">==</span> <span class="dv">7805</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb280-4"><a href="tidy-text-analysis.html#cb280-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">1</span>)   <span class="sc">%&gt;%</span></span>
<span id="cb280-5"><a href="tidy-text-analysis.html#cb280-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;#Trump, who was impeached for withholding nearly $400 million in military aid from Ukraine, said &#39;this deadly Ukraine situation would never have happened&#39; if he were in office https://t.co/o258hgvhRw  https://t.co/R7ivJcvg3s https://t.co/JWvVPzTohT&quot;</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="tidy-text-analysis.html#cb282-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb282-2"><a href="tidy-text-analysis.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tweet, text, word) <span class="sc">%&gt;%</span> </span>
<span id="cb282-3"><a href="tidy-text-analysis.html#cb282-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tweet <span class="sc">==</span> <span class="dv">12781</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb282-4"><a href="tidy-text-analysis.html#cb282-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">1</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb282-5"><a href="tidy-text-analysis.html#cb282-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;@EmbassyofRussia @RussianEmbassy @mfa_russia @PMSimferopol @MID_Kaliningrad @RusEmbUSA @RTUKnews @russiabeyond @RusConsCapetown @Geostrat_ME @RusEmbEst A squad of Chechen special forces &#39;hunters&#39; has been unleashed in Ukraine to detain or KILL a set of specific Ukrainian officials......\nhttps://t.co/PcuTQZeAri&quot;</code></pre>
<p>Thematically, these two tweets do not fit well together, but they both use a lot of brutal words, e.g., kill and deadly. Most likely this is the reason why they have been clustered together. Obviously, we should rerun this analysis with a greater number of topics because our current model does not differentiate well enough between different geographic regions and prominent actors. In most use cases, we would assume that 20-50 topics are a more accurate reflection of real-world conversations.</p>
</div>
<div id="practice-document-topic-probabilities" class="section level4 unnumbered hasAnchor">
<h4>Practice: Document-topic probabilities<a href="tidy-text-analysis.html#practice-document-topic-probabilities" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>What tweets are associated with these topics? Cast the <em>lda</em> model into
the tidy text format and calculate the gamma scores to investigate
document-topic probabilities.</p>
<p>Next, investigate the tweet that scores highest on the document-topic
probabilities for Topic 1 and Topic 3. Do the tweets match your
interpretation of the topics?</p>
</div>
<div id="assessment-of-the-topics-quality" class="section level4 hasAnchor" number="7.4.3.3">
<h4><span class="header-section-number">7.4.3.3</span> Assessment of the topics’ quality<a href="tidy-text-analysis.html#assessment-of-the-topics-quality" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>How do you assess the quality of proposed topic models?</strong> Use the
approach recommended by <a href="https://press.princeton.edu/books/hardcover/9780691207544/text-as-data">Grimmer, Roberts &amp; Steward (2022, p.
152)</a>
when you want to assess the quality of your topic models.</p>
<p>Read a random sample of documents allocated to a topic carefully, but
keep in mind that documents are partial members of <em>all</em> topics.
Therefore, the authors advise looking at documents that have a high
proportion of words that are associated with the topic under
examination. That is, one should create a small subset of documents
where the largest portion of the document is associated with the
particular topic of interest. Go over these documents to see what they
have in common and whether the proposed topic makes sense from an
organizational standpoint.</p>
<p>Building on code provided by <a href="https://ianadamsresearch.com/post/tidy-stm/tidying-stm-with-tidytext/">Ian T.
Adams</a>,
we can create a beautiful overview of our extracted topics and the most
common words that contribute to each topic:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="tidy-text-analysis.html#cb284-1" aria-hidden="true" tabindex="-1"></a>top_terms <span class="ot">&lt;-</span> tidy_lda <span class="sc">%&gt;%</span></span>
<span id="cb284-2"><a href="tidy-text-analysis.html#cb284-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(beta)) <span class="sc">%&gt;%</span></span>
<span id="cb284-3"><a href="tidy-text-analysis.html#cb284-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb284-4"><a href="tidy-text-analysis.html#cb284-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb284-5"><a href="tidy-text-analysis.html#cb284-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(beta)) <span class="sc">%&gt;%</span></span>
<span id="cb284-6"><a href="tidy-text-analysis.html#cb284-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(topic, word) <span class="sc">%&gt;%</span></span>
<span id="cb284-7"><a href="tidy-text-analysis.html#cb284-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">terms =</span> <span class="fu">list</span>(word)) <span class="sc">%&gt;%</span></span>
<span id="cb284-8"><a href="tidy-text-analysis.html#cb284-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">terms =</span> <span class="fu">map</span>(terms, paste, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb284-9"><a href="tidy-text-analysis.html#cb284-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(terms))</span>
<span id="cb284-10"><a href="tidy-text-analysis.html#cb284-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-11"><a href="tidy-text-analysis.html#cb284-11" aria-hidden="true" tabindex="-1"></a>gamma_terms <span class="ot">&lt;-</span> tidy_lda2 <span class="sc">%&gt;%</span></span>
<span id="cb284-12"><a href="tidy-text-analysis.html#cb284-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb284-13"><a href="tidy-text-analysis.html#cb284-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">gamma =</span> <span class="fu">mean</span>(gamma)) <span class="sc">%&gt;%</span></span>
<span id="cb284-14"><a href="tidy-text-analysis.html#cb284-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gamma)) <span class="sc">%&gt;%</span></span>
<span id="cb284-15"><a href="tidy-text-analysis.html#cb284-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(top_terms, <span class="at">by =</span> <span class="st">&quot;topic&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb284-16"><a href="tidy-text-analysis.html#cb284-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">paste0</span>(<span class="st">&quot;Topic &quot;</span>, topic),</span>
<span id="cb284-17"><a href="tidy-text-analysis.html#cb284-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">topic =</span> <span class="fu">reorder</span>(topic, gamma))</span>
<span id="cb284-18"><a href="tidy-text-analysis.html#cb284-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-19"><a href="tidy-text-analysis.html#cb284-19" aria-hidden="true" tabindex="-1"></a>gamma_terms <span class="sc">%&gt;%</span></span>
<span id="cb284-20"><a href="tidy-text-analysis.html#cb284-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gamma)) <span class="sc">%&gt;%</span> </span>
<span id="cb284-21"><a href="tidy-text-analysis.html#cb284-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb284-22"><a href="tidy-text-analysis.html#cb284-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">factor</span>(topic, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Topic 1&quot;</span>,<span class="st">&quot;Topic 2&quot;</span>,<span class="st">&quot;Topic 3&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb284-23"><a href="tidy-text-analysis.html#cb284-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(topic, gamma, <span class="at">label =</span> terms, <span class="at">fill =</span> topic)) <span class="sc">+</span></span>
<span id="cb284-24"><a href="tidy-text-analysis.html#cb284-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb284-25"><a href="tidy-text-analysis.html#cb284-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">hjust =</span> <span class="fl">1.1</span>, <span class="at">nudge_y =</span> <span class="fl">0.0005</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb284-26"><a href="tidy-text-analysis.html#cb284-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#9FC6C0&quot;</span>,<span class="st">&quot;#5495AD&quot;</span>,<span class="st">&quot;#08333F&quot;</span>)) <span class="sc">+</span></span>
<span id="cb284-27"><a href="tidy-text-analysis.html#cb284-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb284-28"><a href="tidy-text-analysis.html#cb284-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb284-29"><a href="tidy-text-analysis.html#cb284-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>)) <span class="sc">+</span></span>
<span id="cb284-30"><a href="tidy-text-analysis.html#cb284-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="fu">expression</span>(gamma),</span>
<span id="cb284-31"><a href="tidy-text-analysis.html#cb284-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;The Three Topics In The Ukrainian Twitter Data (25.02)&quot;</span>,</span>
<span id="cb284-32"><a href="tidy-text-analysis.html#cb284-32" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;With the top words that contribute to each topic&quot;</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-169-1.png" width="672" /></p>
<p>Or in a table format:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="tidy-text-analysis.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb285-2"><a href="tidy-text-analysis.html#cb285-2" aria-hidden="true" tabindex="-1"></a>gamma_terms <span class="sc">%&gt;%</span></span>
<span id="cb285-3"><a href="tidy-text-analysis.html#cb285-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">factor</span>(topic, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Topic 1&quot;</span>,<span class="st">&quot;Topic 2&quot;</span>,<span class="st">&quot;Topic 3&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb285-4"><a href="tidy-text-analysis.html#cb285-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic) <span class="sc">%&gt;%</span> </span>
<span id="cb285-5"><a href="tidy-text-analysis.html#cb285-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(topic, gamma, terms) <span class="sc">%&gt;%</span></span>
<span id="cb285-6"><a href="tidy-text-analysis.html#cb285-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">3</span>, </span>
<span id="cb285-7"><a href="tidy-text-analysis.html#cb285-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Topic&quot;</span>, <span class="st">&quot;Expected topic proportion&quot;</span>, <span class="st">&quot;Top 6 terms&quot;</span>))</span></code></pre></div>
<table>
<colgroup>
<col width="7%" />
<col width="24%" />
<col width="68%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Topic</th>
<th align="right">Expected topic proportion</th>
<th align="left">Top 6 terms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Topic 1</td>
<td align="right">0.333</td>
<td align="left">ukrain, putin, peopl, war, invas, support, invad, countri, world, attack</td>
</tr>
<tr class="even">
<td align="left">Topic 2</td>
<td align="right">0.333</td>
<td align="left">ukrain, russia, putin, war, forc, countri, invas, america, nato, support</td>
</tr>
<tr class="odd">
<td align="left">Topic 3</td>
<td align="right">0.333</td>
<td align="left">ukrain, peopl, putin, russia, war, nato, world, presid, time, amp</td>
</tr>
</tbody>
</table>
<p><strong>Final remark for research:</strong> While the quality of our three topics may appear
satisfactory to you (but most likely not), we must remember that our choice
of <em>K</em> was purely arbitrary. Post-hoc rationalization of this choice is
inherently problematic. If possible, you should base your choice of <em>K</em>
on previous literature and what other researchers have said about a
suitable <em>K</em> for your corpus / your research question. If no such
information is available, the <code>searchK</code> function of the <code>stm</code> package is
your last resort, but it must always be accompanied by critical
re-reading and examination of the topics and documents (e.g., <em>semantic
coherence</em> and <em>exclusivity</em> of topics).<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p><strong>Hands-on learning for practitioners:</strong> As you can see, topic modeling can turn into “reading tea leaves” (<a href="https://proceedings.neurips.cc/paper/2009/file/f92586a25bb3145facd64ab20fd554ff-Paper.pdf">Chang et al., 2009</a>). Depending on how many topics are extracted (number <em>K</em>) and how the data preprocessing was done, one can get very different results. Therefore, you should carefully review topic reports (e.g., the Meltwater’s Key Messages report). Please do not trust such automated analyses blindly.</p>
</div>
</div>
<div id="stms" class="section level3 hasAnchor" number="7.4.4">
<h3><span class="header-section-number">7.4.4</span> STMs<a href="tidy-text-analysis.html#stms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far, we have only used the text of the tweet to estimate the topics.
However, the creation date of a tweet could also be an important
indicator of a topic, as some topics are more prevalent at certain
points in time (the same applies to the author of a tweet, of course).
While LDA has been the most famous topic modeling algorithm, there are
currently a variety of similar techniques available, which all advance
the field. One very popular technique is <em>Structural Topic Modeling</em>
(STM), which is very similar to LDA, but uses meta data about documents
(e.g., author name and creation date) to enhance word assignment to
latent topics in the corpus.</p>
<p>You can estimate STMs with the <code>stm</code> package. We will not discuss STMs
in this tutorial due to time restrictions. However, the <a href="tidy-text-analysis.html#additional-tutorials-6">Additional
tutorials</a> section features two excellent
external STM tutorials that you might want to have a look at.</p>
</div>
</div>
<div id="sentiment-analysis" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Sentiment analysis<a href="tidy-text-analysis.html#sentiment-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The process of analyzing valence or emotions in text data is called
<em>sentiment analysis</em>. One way to approach sentiment analysis is to
understand text as a collection of individual words and assign each word
with a negativity / emotion score. The text’s overall sentiment is
interpreted as the sum of these individual scores. Professional,
peer-reviewed “dictionaries” determine what score should be assigned to
each individual word and they always look somewhat like this example:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="tidy-text-analysis.html#cb286-1" aria-hidden="true" tabindex="-1"></a>tidytext<span class="sc">::</span><span class="fu">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6,786 × 2
##    word        sentiment
##    &lt;chr&gt;       &lt;chr&gt;    
##  1 2-faces     negative 
##  2 abnormal    negative 
##  3 abolish     negative 
##  4 abominable  negative 
##  5 abominably  negative 
##  6 abominate   negative 
##  7 abomination negative 
##  8 abort       negative 
##  9 aborted     negative 
## 10 aborts      negative 
## # … with 6,776 more rows</code></pre>
<p>If you want to use a dictionary, you might need to download and agree to
their license first. Make sure that licenses match the requirements for
your analysis (i.e., non-commercial use only).</p>
<p>In the next section, we will apply different dictionaries to our Ukraine
data.</p>
<div id="sentiment-over-time" class="section level3 hasAnchor" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Sentiment over time<a href="tidy-text-analysis.html#sentiment-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we need to create a data set that contains the word list of the
<code>bing</code> dictionary. We will then add the sentiment evaluations of the
<code>bing</code> word list to our tokenized data set:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="tidy-text-analysis.html#cb288-1" aria-hidden="true" tabindex="-1"></a>bing <span class="ot">&lt;-</span> tidytext<span class="sc">::</span><span class="fu">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)</span>
<span id="cb288-2"><a href="tidy-text-analysis.html#cb288-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-3"><a href="tidy-text-analysis.html#cb288-3" aria-hidden="true" tabindex="-1"></a>data_tknzd_bing <span class="ot">&lt;-</span> data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb288-4"><a href="tidy-text-analysis.html#cb288-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(bing)</span>
<span id="cb288-5"><a href="tidy-text-analysis.html#cb288-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-6"><a href="tidy-text-analysis.html#cb288-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_tknzd_bing)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   time                user         tweet text                    word  sentiment
##   &lt;dttm&gt;              &lt;chr&gt;        &lt;int&gt; &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt;    
## 1 2022-02-25 18:10:59 peekay14         1 &quot;@vonderleyen @EU_Comm… usel… negative 
## 2 2022-02-25 18:10:59 peekay14         1 &quot;@vonderleyen @EU_Comm… sever negative 
## 3 2022-02-25 18:10:59 peekay14         1 &quot;@vonderleyen @EU_Comm… atta… negative 
## 4 2022-02-25 18:10:59 koba19822012    12 &quot;@WorldNewsWWIII God b… bless positive 
## 5 2022-02-25 18:10:59 nexta_tv        24 &quot;Zelensky stays in #Ky… misi… negative 
## 6 2022-02-25 18:10:59 ananthoo1       31 &quot;What a speech! By Ukr… love  positive</code></pre>
<p>Now we can estimate the sentiment of the tweets over time, i.e., see how
the sentiment developed over time.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="tidy-text-analysis.html#cb290-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb290-2"><a href="tidy-text-analysis.html#cb290-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb290-3"><a href="tidy-text-analysis.html#cb290-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sentiment, time) <span class="sc">%&gt;%</span></span>
<span id="cb290-4"><a href="tidy-text-analysis.html#cb290-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sentiment, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb290-5"><a href="tidy-text-analysis.html#cb290-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> positive <span class="sc">-</span> negative) <span class="sc">%&gt;%</span></span>
<span id="cb290-6"><a href="tidy-text-analysis.html#cb290-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> sentiment)) <span class="sc">+</span></span>
<span id="cb290-7"><a href="tidy-text-analysis.html#cb290-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bing dictionary&quot;</span>) <span class="sc">+</span></span>
<span id="cb290-8"><a href="tidy-text-analysis.html#cb290-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb290-9"><a href="tidy-text-analysis.html#cb290-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-173-1.png" width="672" /></p>
<p>Overall, the tone of tweets is negative. Only a few tweets have a
positive valence. Let’s check whether these results are characteristic
for the <code>bing</code> dictionary and compare them to another dictionary, namely
the <code>afinn</code> dictionary. Let’s load the <code>afinn</code> dictionary next. It’s
included in the <code>tidytext</code> package, so you can agree to the licence and
load it that way. I have added the <code>afinn</code> dictionary to a .csv to
import it more effortlessly, so I’ll use this approach.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="tidy-text-analysis.html#cb291-1" aria-hidden="true" tabindex="-1"></a>afinn <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;afinn_dictionary.csv&quot;</span>)</span>
<span id="cb291-2"><a href="tidy-text-analysis.html#cb291-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-3"><a href="tidy-text-analysis.html#cb291-3" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb291-4"><a href="tidy-text-analysis.html#cb291-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(afinn) <span class="sc">%&gt;%</span></span>
<span id="cb291-5"><a href="tidy-text-analysis.html#cb291-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(time) <span class="sc">%&gt;%</span> </span>
<span id="cb291-6"><a href="tidy-text-analysis.html#cb291-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sentiment =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span> </span>
<span id="cb291-7"><a href="tidy-text-analysis.html#cb291-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> sentiment)) <span class="sc">+</span></span>
<span id="cb291-8"><a href="tidy-text-analysis.html#cb291-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Afinn dictionary&quot;</span>) <span class="sc">+</span></span>
<span id="cb291-9"><a href="tidy-text-analysis.html#cb291-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb291-10"><a href="tidy-text-analysis.html#cb291-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
<p>Even though both dictionaries produce similar results, we can see that
<code>afinn</code> estimates a greater amount of positive tweets, while the <code>bing</code>
dictionary estimates larger blocks of uninterrupted negative sentiment.
This behavior of both dictionaries is known, for instance, see this
quote:</p>
<blockquote>
<p>“Different lexicons for calculating sentiment give results that are
different in an absolute sense but have similar relative trajectories
. . . The AFINN lexicon gives the largest absolute values, with high
positive values. The lexicon from Bing et al. has lower absolute
values and seems to label larger blocks of contiguous positive or
negative text.” (Silge &amp; Robinson,
<a href="https://www.tidytextmining.com/sentiment.html">Link</a>)</p>
</blockquote>
<p>Finally, other options include the <code>nrc</code> dictionary that can can
estimate 1) negative and positive valence or 2) emotions such anger,
sadness, joy, etc. For now, let’s import the valence word lists from
<code>nrc</code>and repeat our analysis one last time.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="tidy-text-analysis.html#cb292-1" aria-hidden="true" tabindex="-1"></a>nrc <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;nrc_dictionary.csv&quot;</span>)</span>
<span id="cb292-2"><a href="tidy-text-analysis.html#cb292-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-3"><a href="tidy-text-analysis.html#cb292-3" aria-hidden="true" tabindex="-1"></a>nrc <span class="ot">&lt;-</span> nrc <span class="sc">%&gt;%</span> </span>
<span id="cb292-4"><a href="tidy-text-analysis.html#cb292-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sentiment <span class="sc">==</span> <span class="st">&quot;positive&quot;</span> <span class="sc">|</span> sentiment <span class="sc">==</span> <span class="st">&quot;negative&quot;</span>)</span>
<span id="cb292-5"><a href="tidy-text-analysis.html#cb292-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-6"><a href="tidy-text-analysis.html#cb292-6" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb292-7"><a href="tidy-text-analysis.html#cb292-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(nrc) <span class="sc">%&gt;%</span></span>
<span id="cb292-8"><a href="tidy-text-analysis.html#cb292-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sentiment, time) <span class="sc">%&gt;%</span></span>
<span id="cb292-9"><a href="tidy-text-analysis.html#cb292-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sentiment, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb292-10"><a href="tidy-text-analysis.html#cb292-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> positive <span class="sc">-</span> negative) <span class="sc">%&gt;%</span></span>
<span id="cb292-11"><a href="tidy-text-analysis.html#cb292-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> sentiment)) <span class="sc">+</span></span>
<span id="cb292-12"><a href="tidy-text-analysis.html#cb292-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;NRC dictionary&quot;</span>) <span class="sc">+</span></span>
<span id="cb292-13"><a href="tidy-text-analysis.html#cb292-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb292-14"><a href="tidy-text-analysis.html#cb292-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-175-1.png" width="672" /></p>
<p>Obviously, the <code>nrc</code> dictionary estimates a much greater amount of positive tweets than <code>bing</code> and <code>afinn</code>. This is why you should handle dictionary-based approaches carefully. As <a href="https://www.tandfonline.com/doi/full/10.1080/21670811.2022.2036623">Pipal et al. (2022)</a> put it:</p>
<blockquote>
<p>“Many widely used tools for sentiment analysis have been developed by psychologists to measure emotions in free-form writing (such as in product reviews and micro blogs) in the form of pre-defined lexicons (e.g. Tausczik and Pennebaker 2010), yet they are often conveniently used to measure complex latent constructs in highly structured news articles and speeches despite the content-dependent nature of the tools (Puschmann and Powell 2018; Pipal, Schoonvelde, and Schumacher 2022). Different tools embody different methodological assumptions and particular contexts within which they are initially developed from, leading to diverging consequences across different tools.”</p>
</blockquote>
<p>To this day, most dictionaries cannot compete with manual annotation. Therefore you should manually validate the estimations before applying sentiment tools to your use case. For a very good comparison between dictionaries and manual annotation, see this article: <a href="https://www.tandfonline.com/doi/full/10.1080/19312458.2020.1869198">Link</a>.</p>
<p><strong>Two hands-on learnings:</strong> 1) Don’t trust sentiment analyses of pre-designed sentiment reports too much. If you don’t know how these sentiment scores were produced and how reliable those estimations are, you can’t evaluate their quality. 2) My suggestion is that you tailor your own dictionary to your specific use case (e.g., for your company some words might be positive that are negative for other companies) and validate it with manual coding until you are satisfied with its reliability. This is a one-time effort that can really pay-off, especially for smaller businesses.</p>
</div>
<div id="practice-sentiment-over-time" class="section level3 unnumbered hasAnchor">
<h3>Practice: Sentiment over time<a href="tidy-text-analysis.html#practice-sentiment-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alright, we are ready to perform a sentiment analysis for the Kliemann data. Again, we cannot use the <code>tidytext</code> dictionaries because they were developed only for the English language. However, I’ve prepared a German dictionary for you that is based on <a href="https://www.tandfonline.com/doi/full/10.1080/19331681.2018.1485608">this article by Christian Rauh</a>. You can find the dictionary as a .csv on Moodle. Use it to analyze the sentiment of the Kliemann data over time. <strong>Hint:</strong> You will need to follow the sum(value) approach that I used on the <code>afinn</code> dictionary because the dictionary comes with a <code>value</code> column (metric variable) instead of a <code>sentiment</code> column (nominal variable).</p>
<p><strong>Tip for advanced students:</strong> One big problem with the above presented dictionary approaches is that they do not take into account sentence structure, but treat each sentence as a bag of words. For those dictionary-approaches, word order does not matter to transport sentiment. If you want to run more complex sentiment analyses in the future, try the <code>vader</code> package. <code>vader</code> is not just dictionary-based, but it is so a so-called “rule-based sentiment analysis tool”. This means that it takes into account sentence structure, e.g., negations. We all agree that “not cute” transports a negative sentiment, but the above presented dictionary approaches treat “not” as a stop word and evaluate “cute” as positive.</p>
</div>
<div id="sentiment-over-time-periods" class="section level3 hasAnchor" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Sentiment over time periods<a href="tidy-text-analysis.html#sentiment-over-time-periods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can define time periods and get the sentiment for each individual
time frame. Let’s create three time periods (1 = first 3 min, 2 = 3rd to
6th min, 3 = whole 10 min) and compare the sentiment that both <em>bing</em>
and <em>afinn</em> estimate for these three time periods.</p>
<p>Here are the results for <em>bing</em>:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="tidy-text-analysis.html#cb293-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb293-2"><a href="tidy-text-analysis.html#cb293-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb293-3"><a href="tidy-text-analysis.html#cb293-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">period =</span> <span class="fu">case_when</span>(</span>
<span id="cb293-4"><a href="tidy-text-analysis.html#cb293-4" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&lt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:03:30&#39;</span>) <span class="sc">~</span> <span class="st">&quot;Period 1&quot;</span>,</span>
<span id="cb293-5"><a href="tidy-text-analysis.html#cb293-5" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&gt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:03:31&#39;</span>) <span class="sc">&amp;</span> </span>
<span id="cb293-6"><a href="tidy-text-analysis.html#cb293-6" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&lt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:06:30&#39;</span>) <span class="sc">~</span> <span class="st">&quot;Period 2&quot;</span>,</span>
<span id="cb293-7"><a href="tidy-text-analysis.html#cb293-7" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&gt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:06:31&#39;</span>) <span class="sc">&amp;</span> </span>
<span id="cb293-8"><a href="tidy-text-analysis.html#cb293-8" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&lt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:10:59&#39;</span>) <span class="sc">~</span> <span class="st">&quot;Period 3&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb293-9"><a href="tidy-text-analysis.html#cb293-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(period, sentiment)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   period   sentiment     n
##   &lt;chr&gt;    &lt;chr&gt;     &lt;int&gt;
## 1 Period 1 negative    893
## 2 Period 1 positive    502
## 3 Period 2 negative   1635
## 4 Period 2 positive    964
## 5 Period 3 negative   2487
## 6 Period 3 positive   1488</code></pre>
<p>And here are the results for <em>afinn</em>:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="tidy-text-analysis.html#cb295-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb295-2"><a href="tidy-text-analysis.html#cb295-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(afinn) <span class="sc">%&gt;%</span></span>
<span id="cb295-3"><a href="tidy-text-analysis.html#cb295-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">period =</span> <span class="fu">case_when</span>(</span>
<span id="cb295-4"><a href="tidy-text-analysis.html#cb295-4" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&lt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:03:30&#39;</span>) <span class="sc">~</span> <span class="st">&quot;Period 1&quot;</span>,</span>
<span id="cb295-5"><a href="tidy-text-analysis.html#cb295-5" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&gt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:03:31&#39;</span>) <span class="sc">&amp;</span> </span>
<span id="cb295-6"><a href="tidy-text-analysis.html#cb295-6" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&lt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:06:30&#39;</span>) <span class="sc">~</span> <span class="st">&quot;Period 2&quot;</span>,</span>
<span id="cb295-7"><a href="tidy-text-analysis.html#cb295-7" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&gt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:06:31&#39;</span>) <span class="sc">&amp;</span> </span>
<span id="cb295-8"><a href="tidy-text-analysis.html#cb295-8" aria-hidden="true" tabindex="-1"></a>    time <span class="sc">&lt;=</span> <span class="fu">ymd_hms</span>(<span class="st">&#39;2022-02-25 18:10:59&#39;</span>) <span class="sc">~</span> <span class="st">&quot;Period 3&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb295-9"><a href="tidy-text-analysis.html#cb295-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> <span class="fu">case_when</span>(</span>
<span id="cb295-10"><a href="tidy-text-analysis.html#cb295-10" aria-hidden="true" tabindex="-1"></a>    value <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;negative&quot;</span>,</span>
<span id="cb295-11"><a href="tidy-text-analysis.html#cb295-11" aria-hidden="true" tabindex="-1"></a>    value <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;positive&quot;</span></span>
<span id="cb295-12"><a href="tidy-text-analysis.html#cb295-12" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb295-13"><a href="tidy-text-analysis.html#cb295-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(period, sentiment)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   period   sentiment     n
##   &lt;chr&gt;    &lt;chr&gt;     &lt;int&gt;
## 1 Period 1 negative   1197
## 2 Period 1 positive    731
## 3 Period 2 negative   2112
## 4 Period 2 positive   1283
## 5 Period 3 negative   3219
## 6 Period 3 positive   1999</code></pre>
<div id="practice-sentiment-over-time-periods" class="section level4 unnumbered hasAnchor">
<h4>Practice: Sentiment over time periods<a href="tidy-text-analysis.html#practice-sentiment-over-time-periods" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now try to do a similar analysis with the Kliemann data and investigate the sentiment for each individual month starting and ending with the 6th day of this month. Our data from stretches from 6th of May to 3rd of July, so you have to include these three days of July in the June time period.</p>
</div>
</div>
<div id="sentiment-of-individual-users" class="section level3 hasAnchor" number="7.5.3">
<h3><span class="header-section-number">7.5.3</span> Sentiment of individual users<a href="tidy-text-analysis.html#sentiment-of-individual-users" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now we can calculate the sentiment for each individual user. Let’s try
it.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="tidy-text-analysis.html#cb297-1" aria-hidden="true" tabindex="-1"></a>data_tknzd_bing <span class="ot">&lt;-</span> data_tknzd_bing <span class="sc">%&gt;%</span></span>
<span id="cb297-2"><a href="tidy-text-analysis.html#cb297-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(user, sentiment, time) <span class="sc">%&gt;%</span></span>
<span id="cb297-3"><a href="tidy-text-analysis.html#cb297-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sentiment, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb297-4"><a href="tidy-text-analysis.html#cb297-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> positive <span class="sc">-</span> negative)</span>
<span id="cb297-5"><a href="tidy-text-analysis.html#cb297-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-6"><a href="tidy-text-analysis.html#cb297-6" aria-hidden="true" tabindex="-1"></a>data_tknzd_bing <span class="sc">%&gt;%</span></span>
<span id="cb297-7"><a href="tidy-text-analysis.html#cb297-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 63 × 5
##    user      time                negative positive sentiment
##    &lt;chr&gt;     &lt;dttm&gt;                 &lt;int&gt;    &lt;int&gt;     &lt;int&gt;
##  1 BaloIreen 2022-02-25 18:02:33        1        2         1
##  2 BaloIreen 2022-02-25 18:02:51        1        2         1
##  3 BaloIreen 2022-02-25 18:02:59        1        2         1
##  4 BaloIreen 2022-02-25 18:03:07        1        2         1
##  5 BaloIreen 2022-02-25 18:03:21        1        2         1
##  6 BaloIreen 2022-02-25 18:03:34        1        2         1
##  7 BaloIreen 2022-02-25 18:03:44        1        2         1
##  8 BaloIreen 2022-02-25 18:09:01        1        2         1
##  9 BaloIreen 2022-02-25 18:09:28        1        2         1
## 10 BaloIreen 2022-02-25 18:06:08        0        1         1
## # … with 53 more rows</code></pre>
<p>…and turn it into a visualization of our most active users over time:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="tidy-text-analysis.html#cb299-1" aria-hidden="true" tabindex="-1"></a>data_tknzd_bing <span class="sc">%&gt;%</span> </span>
<span id="cb299-2"><a href="tidy-text-analysis.html#cb299-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user, time) <span class="sc">%&gt;%</span></span>
<span id="cb299-3"><a href="tidy-text-analysis.html#cb299-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb299-4"><a href="tidy-text-analysis.html#cb299-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> sentiment, <span class="at">fill =</span> user)) <span class="sc">+</span></span>
<span id="cb299-5"><a href="tidy-text-analysis.html#cb299-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb299-6"><a href="tidy-text-analysis.html#cb299-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bing: The sentiment of the most active users&quot;</span>) <span class="sc">+</span></span>
<span id="cb299-7"><a href="tidy-text-analysis.html#cb299-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb299-8"><a href="tidy-text-analysis.html#cb299-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>user)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<p>According to the <em>bing</em> dictionary the sentiment of our most active
twitter users was positive and stayed positive over the 10-minute time
frame that we are currently looking at. Positive sentiment while talking
about the outbreak of war? Those are odd results. Maybe the positive
sentiment is characteristic of more active users?</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="tidy-text-analysis.html#cb300-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span></span>
<span id="cb300-2"><a href="tidy-text-analysis.html#cb300-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb300-3"><a href="tidy-text-analysis.html#cb300-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sentiment, time) <span class="sc">%&gt;%</span></span>
<span id="cb300-4"><a href="tidy-text-analysis.html#cb300-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sentiment, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb300-5"><a href="tidy-text-analysis.html#cb300-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> positive <span class="sc">-</span> negative) <span class="sc">%&gt;%</span></span>
<span id="cb300-6"><a href="tidy-text-analysis.html#cb300-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> sentiment)) <span class="sc">+</span></span>
<span id="cb300-7"><a href="tidy-text-analysis.html#cb300-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bing dictionary&quot;</span>) <span class="sc">+</span></span>
<span id="cb300-8"><a href="tidy-text-analysis.html#cb300-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb300-9"><a href="tidy-text-analysis.html#cb300-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
<p>Overall, the tone of tweets is negative, which implies that the most
active users are characterized by a more positive sentiment. That’s an
interesting result and might be an indicator that very active accounts
are trying to push the public opinion in some specific direction. We
could run more in-depth analyses of more users and longer time-periods
to prove that, but for now we want to focus on alternative dictionaries.</p>
<p>Knowing this, let’s check how similar the results are for our most
active users.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="tidy-text-analysis.html#cb301-1" aria-hidden="true" tabindex="-1"></a>data_tknzd <span class="sc">%&gt;%</span> </span>
<span id="cb301-2"><a href="tidy-text-analysis.html#cb301-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(afinn) <span class="sc">%&gt;%</span></span>
<span id="cb301-3"><a href="tidy-text-analysis.html#cb301-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(user, time) <span class="sc">%&gt;%</span></span>
<span id="cb301-4"><a href="tidy-text-analysis.html#cb301-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sentiment =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb301-5"><a href="tidy-text-analysis.html#cb301-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(user <span class="sc">==</span> <span class="st">&quot;common_sense54&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;EdCutter1&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;BaloIreen&quot;</span> <span class="sc">|</span> user <span class="sc">==</span> <span class="st">&quot;LateNighter5&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb301-6"><a href="tidy-text-analysis.html#cb301-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> sentiment, <span class="at">fill =</span> user)) <span class="sc">+</span></span>
<span id="cb301-7"><a href="tidy-text-analysis.html#cb301-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb301-8"><a href="tidy-text-analysis.html#cb301-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Afinn: The sentiment of the most active users&quot;</span>) <span class="sc">+</span></span>
<span id="cb301-9"><a href="tidy-text-analysis.html#cb301-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb301-10"><a href="tidy-text-analysis.html#cb301-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>user)</span></code></pre></div>
<p><img src="PR-Erfolgskontrolle_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>That looks good, both <code>bing</code> and <code>afinn</code> come to similar conclusions,
i.e., the most active users publish tweets with a positive sentiment.
The dictionary approaches that treat sentiment as the sum of the
individual negativity/emotion ratings of words are consistent with each
other.</p>
</div>
</div>
<div id="take-aways-6" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Take-Aways<a href="tidy-text-analysis.html#take-aways-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><strong>Text normalization</strong>: You can perform the entire preprocessing of
your documents using the <code>tidy text approach</code> (tokenization, stop
words, removal, etc.).</li>
<li><strong>Word freqencies &amp; Log Odds</strong>: The <code>tidy text approach</code> can also be
used to calculate word frequencies and log odds to identify the most
common word per author, etc.</li>
<li><strong>Topic modeling</strong>: Topic models are mixed-membership models, i.e.,
they assume that every text contains a mix of different topics. The
best known topic modeling algorithm is LDA.</li>
<li><strong>K:</strong> Number of topics to be estimated.</li>
<li><strong>Word-topic matrix</strong>: Aids in the creation of topic-specific word
lists.</li>
<li><strong>Document-topic matrix</strong>: Aids in the creation of document-specific
topic lists.</li>
</ul>
</div>
<div id="additional-tutorials-6" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> Additional tutorials<a href="tidy-text-analysis.html#additional-tutorials-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You still have questions? The following tutorials, books, &amp; papers may
help you:</p>
<ul>
<li><a href="https://bookdown.org/valerie_hase/TextasData_HS2021/tutorial-13-topic-modeling.html">Text as Data by V. Hase, Tutorial
13</a></li>
<li><a href="https://sicss.io/2019/materials/day3-text-analysis/topic-modeling/rmarkdown/Topic_Modeling.html">Topic Modeling by C.
Bail</a></li>
<li><a href="https://www.tidytextmining.com/">Text Mining in R. A Tidy Approach by Silge &amp; Robinson
(2017)</a></li>
</ul>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>To disable this feature, use the to_lower = FALSE option.<a href="tidy-text-analysis.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>This function takes a range of <em>K</em> values, calculates topic models
for each value of <em>K</em>, and then generates goodness-of-fit
measurements that indicate what value for <em>K</em> fits the data best.<a href="tidy-text-analysis.html#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exercise-5-test-your-knowledge.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="solutions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/LKobilke/PR-Erfolgskontrolle/edit/main/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["PR-Erfolgskontrolle.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
